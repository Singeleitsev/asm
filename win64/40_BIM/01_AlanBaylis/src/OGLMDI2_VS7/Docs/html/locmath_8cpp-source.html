<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>locmath.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>locmath.cpp</h1><a href="locmath_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include &lt;windows.h&gt;</font>
00002 <font class="preprocessor">#include "<a class="code" href="locmath_8h.html">locmath.h</a>"</font>
00003 <font class="preprocessor">#include "<a class="code" href="vector_8h.html">vector.h</a>"</font>
00004 <font class="preprocessor">#include "<a class="code" href="quat_8h.html">quat.h</a>"</font>
00005 <font class="preprocessor">#include "<a class="code" href="vertex_8h.html">vertex.h</a>"</font>
00006 <font class="preprocessor">#include "mmgr.h"</font>
00007 
<a name="l00008"></a><a class="code" href="locmath_8cpp.html#a0">00008</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a0">LoadIdentity</a>(<font class="keywordtype">float</font> m[])
00009 {
00010         m[0]=1.0f;
00011         m[1]=0.0f;
00012         m[2]=0.0f;
00013         m[3]=0.0f;
00014 
00015         m[4]=0.0f;
00016         m[5]=1.0f;
00017         m[6]=0.0f;
00018         m[7]=0.0f;
00019 
00020         m[8]=0.0f;
00021         m[9]=0.0f;
00022         m[10]=1.0f;
00023         m[11]=0.0f;
00024 
00025         m[12]=0.0f;
00026         m[13]=0.0f;
00027         m[14]=0.0f;
00028         m[15]=1.0f;
00029 }
00030 
<a name="l00031"></a><a class="code" href="locmath_8cpp.html#a1">00031</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(<font class="keywordtype">float</font> m[], <font class="keywordtype">float</font> n[])
00032 {
00033         m[0 ] = n[0 ];
00034         m[1 ] = n[1 ];
00035         m[2 ] = n[2 ];
00036         m[3 ] = n[3 ];
00037         m[4 ] = n[4 ];
00038         m[5 ] = n[5 ];
00039         m[6 ] = n[6 ];
00040         m[7 ] = n[7 ];
00041         m[8 ] = n[8 ];
00042         m[9 ] = n[9 ];
00043         m[10] = n[10];
00044         m[11] = n[11];
00045         m[12] = n[12];
00046         m[13] = n[13];
00047         m[14] = n[14];
00048         m[15] = n[15];
00049 }
00050 
<a name="l00051"></a><a class="code" href="locmath_8cpp.html#a2">00051</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a2">MultMatrix</a>(<font class="keywordtype">float</font> m[], <font class="keywordtype">float</font> n[])
00052 {
00053         <font class="keywordtype">float</font> temp[16];
00054 
00055         <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(temp, m);
00056       m[0] = temp[0 ]*n[0 ]
00057                + temp[4 ]*n[1 ]
00058                + temp[8 ]*n[2 ]
00059                + temp[12]*n[3 ];
00060 
00061       m[1] = temp[1 ]*n[0 ]
00062                + temp[5 ]*n[1 ]
00063                + temp[9 ]*n[2 ]
00064                + temp[13]*n[3 ];
00065 
00066       m[2] = temp[2 ]*n[0 ]
00067                + temp[6 ]*n[1 ]
00068                + temp[10]*n[2 ]
00069                + temp[14]*n[3 ];
00070 
00071       m[3] = temp[3 ]*n[0 ]
00072                + temp[7 ]*n[1 ]
00073                + temp[11]*n[2 ]
00074                + temp[15]*n[3 ];
00075 
00076       m[4] = temp[0 ]*n[4 ]
00077                + temp[4 ]*n[5 ]
00078                + temp[8 ]*n[6 ]
00079                + temp[12]*n[7 ];
00080 
00081       m[5] = temp[1 ]*n[4 ]
00082                + temp[5 ]*n[5 ]
00083                + temp[9 ]*n[6 ]
00084                + temp[13]*n[7 ];
00085 
00086       m[6] = temp[2 ]*n[4 ]
00087                + temp[6 ]*n[5 ]
00088                + temp[10]*n[6 ]
00089                + temp[14]*n[7 ];
00090 
00091       m[7] = temp[3 ]*n[4 ]
00092                + temp[7 ]*n[5 ]
00093                + temp[11]*n[6 ]
00094                + temp[15]*n[7 ];
00095 
00096       m[8] = temp[0 ]*n[8 ]
00097                + temp[4 ]*n[9 ]
00098                + temp[8 ]*n[10]
00099                + temp[12]*n[11];
00100 
00101       m[9] = temp[1 ]*n[8 ]
00102                + temp[5 ]*n[9 ]
00103                + temp[9 ]*n[10]
00104                + temp[13]*n[11];
00105 
00106       m[10]= temp[2 ]*n[8 ]
00107                + temp[6 ]*n[9 ]
00108                + temp[10]*n[10]
00109                + temp[14]*n[11];
00110 
00111       m[11]= temp[3 ]*n[8 ]
00112                + temp[7 ]*n[9 ]
00113                + temp[11]*n[10]
00114                + temp[15]*n[11];
00115 
00116       m[12]= temp[0 ]*n[12]
00117                + temp[4 ]*n[13]
00118                + temp[8 ]*n[14]
00119                + temp[12]*n[15];
00120 
00121       m[13]= temp[1 ]*n[12]
00122                + temp[5 ]*n[13]
00123                + temp[9 ]*n[14]
00124                + temp[13]*n[15];
00125 
00126       m[14]= temp[2 ]*n[12]
00127                + temp[6 ]*n[13]
00128                + temp[10]*n[14]
00129                + temp[14]*n[15];
00130 
00131       m[15]= temp[3 ]*n[12]
00132                + temp[7 ]*n[13]
00133                + temp[11]*n[14]
00134                + temp[15]*n[15];
00135 }
00136 
<a name="l00137"></a><a class="code" href="locmath_8cpp.html#a3">00137</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a3">MatrixInverse</a>(<font class="keywordtype">float</font> m[])
00138 {
00139     <font class="keywordtype">float</font> n[16];
00140 
00141       <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(n, m);
00142       m[0 ] = n[0 ];
00143       m[1 ] = n[4 ];
00144       m[2 ] = n[8 ];
00145 
00146       m[4 ] = n[1 ];
00147       m[5 ] = n[5 ];
00148       m[6 ] = n[9 ];
00149 
00150       m[8 ] = n[2 ];
00151       m[9 ] = n[6 ];
00152       m[10] = n[10];
00153 
00154       m[12] *= -1.0f;
00155       m[13] *= -1.0f;
00156       m[14] *= -1.0f;
00157 }
00158 
00159     <font class="comment">/* The following routine converts an angle and a unit axis vector</font>
00160 <font class="comment">        * to a matrix, returning the corresponding unit quaternion at no</font>
00161 <font class="comment">        * extra cost. It is written in such a way as to allow both fixed</font>
00162 <font class="comment">        * point and floating point versions to be created by appropriate</font>
00163 <font class="comment">        * definitions of FPOINT, ANGLE, VECTOR, QUAT, MATRIX, MUL, HALF,</font>
00164 <font class="comment">        * TWICE, COS, SIN, ONE, and ZERO.</font>
00165 <font class="comment">        * The following is an example of floating point definitions.*/</font>
<a name="l00166"></a><a class="code" href="locmath_8cpp.html#a4">00166</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a4">AxisAngleToMatrix</a>(<a class="code" href="classVECTOR.html">VECTOR</a> axis, <font class="keywordtype">float</font> theta, <font class="keywordtype">float</font> m[16])
00167 {
00168         <a class="code" href="classQUAT.html">QUAT</a> q;
00169         <font class="keywordtype">float</font> halfTheta = theta * 0.5;
00170         <font class="keywordtype">float</font> cosHalfTheta = cos(halfTheta);
00171         <font class="keywordtype">float</font> sinHalfTheta = sin(halfTheta);
00172         <font class="keywordtype">float</font> xs, ys, zs, wx, wy, wz, xx, xy, xz, yy, yz, zz;
00173         q.<a class="code" href="classQUAT.html#m0">x</a> = axis.<a class="code" href="classVECTOR.html#m0">x</a> * sinHalfTheta;
00174         q.<a class="code" href="classQUAT.html#m1">y</a> = axis.<a class="code" href="classVECTOR.html#m1">y</a> * sinHalfTheta;
00175         q.<a class="code" href="classQUAT.html#m2">z</a> = axis.<a class="code" href="classVECTOR.html#m2">z</a> * sinHalfTheta;
00176         q.<a class="code" href="classQUAT.html#m3">w</a> = cosHalfTheta;
00177         xs = q.<a class="code" href="classQUAT.html#m0">x</a> * 2;  ys = q.<a class="code" href="classQUAT.html#m1">y</a> * 2;  zs = q.<a class="code" href="classQUAT.html#m2">z</a> * 2;
00178         wx = q.<a class="code" href="classQUAT.html#m3">w</a> * xs; wy = q.<a class="code" href="classQUAT.html#m3">w</a> * ys; wz = q.<a class="code" href="classQUAT.html#m3">w</a> * zs;
00179         xx = q.<a class="code" href="classQUAT.html#m0">x</a> * xs; xy = q.<a class="code" href="classQUAT.html#m0">x</a> * ys; xz = q.<a class="code" href="classQUAT.html#m0">x</a> * zs;
00180         yy = q.<a class="code" href="classQUAT.html#m1">y</a> * ys; yz = q.<a class="code" href="classQUAT.html#m1">y</a> * zs; zz = q.<a class="code" href="classQUAT.html#m2">z</a> * zs;
00181         m[0] = 1 - (yy + zz);
00182         m[1] = xy - wz;
00183         m[2] = xz + wy;
00184         m[4] = xy + wz;
00185         m[5] = 1 - (xx + zz);
00186         m[6] = yz - wx;
00187         m[8] = xz - wy;
00188         m[9] = yz + wx;
00189         m[10] = 1 - (xx + yy);
00190         <font class="comment">/* Fill in remainder of 4x4 homogeneous transform matrix. */</font>
00191         m[12] = m[13] = m[14] = m[3] = m[7] = m[11] = 0;
00192         m[15] = 1;
00193         <font class="keywordflow">return</font> (q);
00194 }
00195 
<a name="l00196"></a><a class="code" href="locmath_8cpp.html#a5">00196</a> <font class="keywordtype">float</font> <a class="code" href="locmath_8cpp.html#a5">DotProduct</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1, <a class="code" href="classVECTOR.html">VECTOR</a> vec2)
00197 {
00198     <font class="comment">/*</font>
00199 <font class="comment">    Dot Product of two Vectors.</font>
00200 <font class="comment"></font>
00201 <font class="comment">    U = (Ux, Uy, Uz)</font>
00202 <font class="comment">    V = (Vx, Vy, Vz)</font>
00203 <font class="comment">    U*V = UxVx + UyVy + UzVz</font>
00204 <font class="comment">    U*V = |U||V|cos(t) (where t is the angle theta between the two vectors)</font>
00205 <font class="comment">    */</font>
00206       <font class="keywordtype">float</font> <a class="code" href="locmath_8h.html#a0">dot</a>;
00207       <a class="code" href="locmath_8h.html#a0">dot</a> = vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a> + vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a> + vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a>;
00208       <font class="keywordflow">return</font> <a class="code" href="locmath_8h.html#a0">dot</a>;
00209 }
00210 
<a name="l00211"></a><a class="code" href="locmath_8cpp.html#a6">00211</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a6">CrossVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1, <a class="code" href="classVECTOR.html">VECTOR</a> vec2)
00212 {
00213     <font class="comment">/*</font>
00214 <font class="comment">    Cross Product of Two Vectors.</font>
00215 <font class="comment"></font>
00216 <font class="comment">    a × b = ( a.y * b.z - a.z * b.y,</font>
00217 <font class="comment"></font>
00218 <font class="comment">    a.z * b.x - a.x * b.z,</font>
00219 <font class="comment"></font>
00220 <font class="comment">    a.x * b.y - a.y * b.x )</font>
00221 <font class="comment"></font>
00222 <font class="comment">    | a × b | = |a| * |b| * sin(ø)</font>
00223 <font class="comment">    */</font>
00224       <a class="code" href="classVECTOR.html">VECTOR</a> vec3;
00225       vec3.<a class="code" href="classVECTOR.html#m0">x</a> = vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a> - vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a>;
00226       vec3.<a class="code" href="classVECTOR.html#m1">y</a> = vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a> - vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a>;
00227       vec3.<a class="code" href="classVECTOR.html#m2">z</a> = vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a> - vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a>;
00228       <font class="keywordflow">return</font> vec3;
00229 }
00230 
<a name="l00231"></a><a class="code" href="locmath_8cpp.html#a7">00231</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a7">EulerToQuat</a>(<font class="keywordtype">float</font> roll, <font class="keywordtype">float</font> pitch, <font class="keywordtype">float</font> yaw, <a class="code" href="classQUAT.html">QUAT</a> * quat)
00232 {
00233     <font class="comment">/*</font>
00234 <font class="comment">    Euler Angle to Quarternion.</font>
00235 <font class="comment"></font>
00236 <font class="comment">    q = qyaw qpitch qroll where:</font>
00237 <font class="comment"></font>
00238 <font class="comment">    qyaw = [cos(f /2), (0, 0, sin(f /2)]</font>
00239 <font class="comment">    qpitch = [cos (q/2), (0, sin(q/2), 0)]</font>
00240 <font class="comment">    qroll = [cos (y/2), (sin(y/2), 0, 0)]</font>
00241 <font class="comment">    */</font>
00242     <font class="keywordtype">float</font> cr, cp, cy, sr, sp, sy, cpcy, spsy;  <font class="comment">// calculate trig identities</font>
00243         cr = cos(roll/2);
00244     cp = cos(pitch/2);
00245         cy = cos(yaw/2);
00246         sr = sin(roll/2);
00247     sp = sin(pitch/2);
00248         sy = sin(yaw/2);
00249         cpcy = cp * cy;
00250         spsy = sp * sy;
00251     quat-&gt;<a class="code" href="classQUAT.html#m3">w</a> = cr * cpcy + sr * spsy;
00252         quat-&gt;<a class="code" href="classQUAT.html#m0">x</a> = sr * cpcy - cr * spsy;
00253     quat-&gt;<a class="code" href="classQUAT.html#m1">y</a> = cr * sp * cy + sr * cp * sy;
00254         quat-&gt;<a class="code" href="classQUAT.html#m2">z</a> = cr * cp * sy - sr * sp * cy;
00255 }
00256 
<a name="l00257"></a><a class="code" href="locmath_8cpp.html#a8">00257</a> <font class="keywordtype">float</font> <a class="code" href="locmath_8cpp.html#a8">MagnitudeQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1)
00258 {
00259       <font class="keywordflow">return</font>( sqrt(q1.<a class="code" href="classQUAT.html#m3">w</a>*q1.<a class="code" href="classQUAT.html#m3">w</a>+q1.<a class="code" href="classQUAT.html#m0">x</a>*q1.<a class="code" href="classQUAT.html#m0">x</a>+q1.<a class="code" href="classQUAT.html#m1">y</a>*q1.<a class="code" href="classQUAT.html#m1">y</a>+q1.<a class="code" href="classQUAT.html#m2">z</a>*q1.<a class="code" href="classQUAT.html#m2">z</a>));
00260 }
00261 
<a name="l00262"></a><a class="code" href="locmath_8cpp.html#a9">00262</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a9">NormaliseQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1)
00263 {
00264       <a class="code" href="classQUAT.html">QUAT</a> q2;
00265       <font class="keywordtype">float</font> Mag;
00266       Mag = <a class="code" href="locmath_8cpp.html#a8">MagnitudeQuat</a>(q1);
00267       q2.<a class="code" href="classQUAT.html#m3">w</a> = q1.<a class="code" href="classQUAT.html#m3">w</a>/Mag;
00268       q2.<a class="code" href="classQUAT.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m0">x</a>/Mag;
00269       q2.<a class="code" href="classQUAT.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m1">y</a>/Mag;
00270       q2.<a class="code" href="classQUAT.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m2">z</a>/Mag;
00271       <font class="keywordflow">return</font> q2;
00272 }
00273 
<a name="l00274"></a><a class="code" href="locmath_8cpp.html#a10">00274</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a10">QuatToMatrix</a>(<a class="code" href="classQUAT.html">QUAT</a> quat, <font class="keywordtype">float</font> m[16])
00275 {
00276       <font class="keywordtype">float</font> wx, wy, wz, xx, yy, yz, xy, xz, zz, x2, y2, z2;
00277       <font class="comment">// calculate coefficients</font>
00278       x2 = quat.<a class="code" href="classQUAT.html#m0">x</a> + quat.<a class="code" href="classQUAT.html#m0">x</a>;
00279       y2 = quat.<a class="code" href="classQUAT.html#m1">y</a> + quat.<a class="code" href="classQUAT.html#m1">y</a>;
00280       z2 = quat.<a class="code" href="classQUAT.html#m2">z</a> + quat.<a class="code" href="classQUAT.html#m2">z</a>;
00281       xx = quat.<a class="code" href="classQUAT.html#m0">x</a> * x2;
00282       xy = quat.<a class="code" href="classQUAT.html#m0">x</a> * y2;
00283       xz = quat.<a class="code" href="classQUAT.html#m0">x</a> * z2;
00284       yy = quat.<a class="code" href="classQUAT.html#m1">y</a> * y2;
00285       yz = quat.<a class="code" href="classQUAT.html#m1">y</a> * z2;
00286       zz = quat.<a class="code" href="classQUAT.html#m2">z</a> * z2;
00287       wx = quat.<a class="code" href="classQUAT.html#m3">w</a> * x2;
00288       wy = quat.<a class="code" href="classQUAT.html#m3">w</a> * y2;
00289       wz = quat.<a class="code" href="classQUAT.html#m3">w</a> * z2;
00290       m[0] = 1.0 - (yy + zz);
00291       m[1] = xy - wz;
00292       m[2] = xz + wy;
00293       m[3] = 0.0;
00294       m[4] = xy + wz;
00295       m[5] = 1.0 - (xx + zz);
00296       m[6] = yz - wx;
00297       m[7] = 0.0;
00298       m[8] = xz - wy;
00299       m[9] = yz + wx;
00300       m[10] = 1.0 - (xx + yy);
00301       m[11] = 0.0;
00302       m[12] = 0;
00303       m[13] = 0;
00304       m[14] = 0;
00305       m[15] = 1;
00306 }
00307 
<a name="l00308"></a><a class="code" href="locmath_8cpp.html#a11">00308</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a11">MultQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1, <a class="code" href="classQUAT.html">QUAT</a> q2)
00309 {
00310     <font class="comment">/*</font>
00311 <font class="comment">    Multiplication of two Quarternions.</font>
00312 <font class="comment"></font>
00313 <font class="comment">    qq´ = [ww´ - v · v´, v x v´ + wv´ +w´v]</font>
00314 <font class="comment">    ( · is vector dot product and x is vector cross product )</font>
00315 <font class="comment">    */</font>
00316       <a class="code" href="classQUAT.html">QUAT</a> q3;
00317       <a class="code" href="classVECTOR.html">VECTOR</a> vectorq1;
00318       <a class="code" href="classVECTOR.html">VECTOR</a> vectorq2;
00319       vectorq1.<a class="code" href="classVECTOR.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m0">x</a>;
00320       vectorq1.<a class="code" href="classVECTOR.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m1">y</a>;
00321       vectorq1.<a class="code" href="classVECTOR.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m2">z</a>;
00322       vectorq2.<a class="code" href="classVECTOR.html#m0">x</a> = q2.<a class="code" href="classQUAT.html#m0">x</a>;
00323       vectorq2.<a class="code" href="classVECTOR.html#m1">y</a> = q2.<a class="code" href="classQUAT.html#m1">y</a>;
00324       vectorq2.<a class="code" href="classVECTOR.html#m2">z</a> = q2.<a class="code" href="classQUAT.html#m2">z</a>;
00325 
00326       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec1;
00327       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec2;
00328       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec3;
00329       q3.<a class="code" href="classQUAT.html#m3">w</a> = (q1.<a class="code" href="classQUAT.html#m3">w</a>*q2.<a class="code" href="classQUAT.html#m3">w</a>) - <a class="code" href="locmath_8cpp.html#a5">DotProduct</a>(vectorq1, vectorq2);
00330       tempvec1 = <a class="code" href="locmath_8cpp.html#a6">CrossVector</a>(vectorq1, vectorq2);
00331       tempvec2.<a class="code" href="classVECTOR.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m0">x</a>;
00332       tempvec2.<a class="code" href="classVECTOR.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m1">y</a>;
00333       tempvec2.<a class="code" href="classVECTOR.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m2">z</a>;
00334       tempvec3.<a class="code" href="classVECTOR.html#m0">x</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m0">x</a>;
00335       tempvec3.<a class="code" href="classVECTOR.html#m1">y</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m1">y</a>;
00336       tempvec3.<a class="code" href="classVECTOR.html#m2">z</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m2">z</a>;
00337       q3.<a class="code" href="classQUAT.html#m0">x</a> = tempvec1.<a class="code" href="classVECTOR.html#m0">x</a> + tempvec2.<a class="code" href="classVECTOR.html#m0">x</a> + tempvec3.<a class="code" href="classVECTOR.html#m0">x</a>;
00338       q3.<a class="code" href="classQUAT.html#m1">y</a> = tempvec1.<a class="code" href="classVECTOR.html#m1">y</a> + tempvec2.<a class="code" href="classVECTOR.html#m1">y</a> + tempvec3.<a class="code" href="classVECTOR.html#m1">y</a>;
00339       q3.<a class="code" href="classQUAT.html#m2">z</a> = tempvec1.<a class="code" href="classVECTOR.html#m2">z</a> + tempvec2.<a class="code" href="classVECTOR.html#m2">z</a> + tempvec3.<a class="code" href="classVECTOR.html#m2">z</a>;
00340       <font class="keywordflow">return</font> <a class="code" href="locmath_8cpp.html#a9">NormaliseQuat</a>(q3);
00341 }
00342 
<a name="l00343"></a><a class="code" href="locmath_8cpp.html#a12">00343</a> <a class="code" href="classVERTEX.html">VERTEX</a> <a class="code" href="locmath_8cpp.html#a12">GetNorm</a>(<font class="keywordtype">float</font> x1, <font class="keywordtype">float</font> y1, <font class="keywordtype">float</font> z1, <font class="keywordtype">float</font> x2, <font class="keywordtype">float</font> y2, <font class="keywordtype">float</font> z2, <font class="keywordtype">float</font> x3, <font class="keywordtype">float</font> y3, <font class="keywordtype">float</font> z3)
00344 {
00345         <font class="keywordtype">float</font> ux;
00346         <font class="keywordtype">float</font> uy;
00347         <font class="keywordtype">float</font> uz;
00348         <font class="keywordtype">float</font> vx;
00349         <font class="keywordtype">float</font> vy;
00350         <font class="keywordtype">float</font> vz;
00351           <a class="code" href="classVERTEX.html">VERTEX</a> temp_vertex;
00352           ux = x1 - x2;
00353           uy = y1 - y2;
00354           uz = z1 - z2;
00355           vx = x3 - x2;
00356           vy = y3 - y2;
00357           vz = z3 - z2;
00358           temp_vertex.<a class="code" href="classVERTEX.html#m4">nx</a> = (uy*vz)-(vy*uz);
00359           temp_vertex.<a class="code" href="classVERTEX.html#m5">ny</a> = (uz*vx)-(vz*ux);
00360           temp_vertex.<a class="code" href="classVERTEX.html#m6">nz</a> = (ux*vy)-(vx*uy);
00361           <font class="keywordflow">return</font> temp_vertex;
00362 }
00363 
<a name="l00364"></a><a class="code" href="locmath_8cpp.html#a13">00364</a> GLfloat <a class="code" href="locmath_8cpp.html#a13">MagnitudeVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1)
00365 {
00366   <font class="keywordflow">return</font>(sqrt(vec1.<a class="code" href="classVECTOR.html#m0">x</a>*vec1.<a class="code" href="classVECTOR.html#m0">x</a>+vec1.<a class="code" href="classVECTOR.html#m1">y</a>*vec1.<a class="code" href="classVECTOR.html#m1">y</a>+vec1.<a class="code" href="classVECTOR.html#m2">z</a>*vec1.<a class="code" href="classVECTOR.html#m2">z</a>));
00367 }
00368 
<a name="l00369"></a><a class="code" href="locmath_8cpp.html#a14">00369</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a14">GetUnitVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vector)
00370 {
00371         <font class="comment">// Reduces a normal vector specified as a set of three coordinates,</font>
00372         <font class="comment">// to a unit normal vector of length one.</font>
00373 
00374         <font class="comment">// Calculate the length of the vector           </font>
00375         <font class="keywordtype">float</font> length = (float) sqrt(( vector.<a class="code" href="classVECTOR.html#m0">x</a> * vector.<a class="code" href="classVECTOR.html#m0">x</a>) + 
00376                                                         ( vector.<a class="code" href="classVECTOR.html#m1">y</a> * vector.<a class="code" href="classVECTOR.html#m1">y</a>) +
00377                                                         ( vector.<a class="code" href="classVECTOR.html#m2">z</a> * vector.<a class="code" href="classVECTOR.html#m2">z</a>) );
00378 
00379         <font class="comment">// Keep the program from blowing up by providing an exceptable</font>
00380         <font class="comment">// value for vectors that may calculated too close to zero.</font>
00381         <font class="keywordflow">if</font>(length == 0.0f)
00382                 length = 1.0f;
00383 
00384         <font class="comment">// Dividing each element by the length will result in a</font>
00385         <font class="comment">// unit normal vector.</font>
00386         vector.<a class="code" href="classVECTOR.html#m0">x</a> /= length;
00387         vector.<a class="code" href="classVECTOR.html#m1">y</a> /= length;
00388         vector.<a class="code" href="classVECTOR.html#m2">z</a> /= length;
00389         <font class="keywordflow">return</font> vector;
00390 }
00391 
<a name="l00392"></a><a class="code" href="locmath_8cpp.html#a15">00392</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a15">GetEdgeVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> point1, <a class="code" href="classVECTOR.html">VECTOR</a> point2)
00393 {
00394   <a class="code" href="classVECTOR.html">VECTOR</a> temp_vector;
00395   temp_vector.<a class="code" href="classVECTOR.html#m0">x</a> = point1.<a class="code" href="classVECTOR.html#m0">x</a> - point2.<a class="code" href="classVECTOR.html#m0">x</a>;
00396   temp_vector.<a class="code" href="classVECTOR.html#m1">y</a> = point1.<a class="code" href="classVECTOR.html#m1">y</a> - point2.<a class="code" href="classVECTOR.html#m1">y</a>;
00397   temp_vector.<a class="code" href="classVECTOR.html#m2">z</a> = point1.<a class="code" href="classVECTOR.html#m2">z</a> - point2.<a class="code" href="classVECTOR.html#m2">z</a>;
00398   <font class="keywordflow">return</font> temp_vector;
00399 }
</pre></div><hr><address align="right"><small>Generated on Fri Dec 23 05:19:34 2005 for OpenGL MDI 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
