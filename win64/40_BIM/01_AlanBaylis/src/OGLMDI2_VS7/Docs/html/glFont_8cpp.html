<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>glFont.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>glFont.cpp File Reference</h1><code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;malloc.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;gl\gl.h&gt;</code><br>
<code>#include "<a class="el" href="glfont_8h-source.html">glfont.h</a>"</code><br>
<code>#include "mmgr.h"</code><br>

<p>
<a href="glFont_8cpp-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a1">glFontCreate</a> (<a class="el" href="structGLFONT.html">GLFONT</a> *Font, char *FileName, int Tex)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a2">glFontDestroy</a> (<a class="el" href="structGLFONT.html">GLFONT</a> *Font)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a3">glFontBegin</a> (<a class="el" href="structGLFONT.html">GLFONT</a> *Font)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a4">glFontEnd</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a5">glFontTextOut</a> (char *String, float x, float y, float z)</td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structGLFONT.html">GLFONT</a> *&nbsp;</td><td valign=bottom><a class="el" href="glFont_8cpp.html#a0">glFont</a></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a3" doxytag="glFont.cpp::glFontBegin"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void glFontBegin </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structGLFONT.html">GLFONT</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>Font</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00095">95</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.
<p>
References <a class="el" href="glfont_8h-source.html#l00034">GLFONT::Char</a>, and <a class="el" href="glfont_8h-source.html#l00031">GLFONT::Tex</a>.
<p>
<div class="fragment"><pre>00096 {
00097     <font class="comment">//Save pointer to font structure</font>
00098     <font class="keywordflow">if</font> (Font-&gt;<a class="code" href="structGLFONT.html#m5">Char</a> != NULL)
00099         <a class="code" href="glFont_8cpp.html#a0">glFont</a> = Font;
00100     <font class="keywordflow">else</font>
00101         <a class="code" href="glFont_8cpp.html#a0">glFont</a> = NULL;
00102 
00103     <font class="comment">//Bind to font texture</font>
00104     glBindTexture(GL_TEXTURE_2D, Font-&gt;<a class="code" href="structGLFONT.html#m0">Tex</a>);
00105 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="glFont.cpp::glFontCreate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int glFontCreate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structGLFONT.html">GLFONT</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>Font</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>FileName</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>Tex</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00026">26</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.
<p>
References <a class="el" href="glfont_8h-source.html#l00034">GLFONT::Char</a>, <a class="el" href="glfont_8h-source.html#l00013">FALSE</a>, <a class="el" href="glfont_8h-source.html#l00033">GLFONT::IntEnd</a>, <a class="el" href="glfont_8h-source.html#l00033">GLFONT::IntStart</a>, <a class="el" href="glfont_8h-source.html#l00031">GLFONT::Tex</a>, <a class="el" href="glfont_8h-source.html#l00032">GLFONT::TexHeight</a>, <a class="el" href="glfont_8h-source.html#l00032">GLFONT::TexWidth</a>, and <a class="el" href="glfont_8h-source.html#l00009">TRUE</a>.
<p>
<div class="fragment"><pre>00027 {
00028     FILE *Input;
00029     <font class="keywordtype">char</font> *TexBytes;
00030     <font class="keywordtype">int</font> Num;
00031 
00032     <font class="comment">//Open font file</font>
00033     <font class="keywordflow">if</font> ((Input = fopen(FileName, <font class="stringliteral">"rb"</font>)) == NULL)
00034         <font class="keywordflow">return</font> <a class="code" href="glfont_8h.html#a1">FALSE</a>;
00035 
00036     <font class="comment">//Read glFont structure</font>
00037     fread(Font, <font class="keyword">sizeof</font>(<a class="code" href="structGLFONT.html">GLFONT</a>), 1, Input);
00038 
00039     <font class="comment">//Save texture number</font>
00040     Font-&gt;<a class="code" href="structGLFONT.html#m0">Tex</a> = Tex;
00041 
00042     <font class="comment">//Get number of characters</font>
00043     Num = Font-&gt;<a class="code" href="structGLFONT.html#m4">IntEnd</a> - Font-&gt;<a class="code" href="structGLFONT.html#m3">IntStart</a> + 1;
00044 
00045     <font class="comment">//Allocate memory for characters</font>
00046     <font class="keywordflow">if</font> ((Font-&gt;<a class="code" href="structGLFONT.html#m5">Char</a> = (<a class="code" href="structGLFONTCHAR.html">GLFONTCHAR</a> *)malloc(
00047         <font class="keyword">sizeof</font>(<a class="code" href="structGLFONTCHAR.html">GLFONTCHAR</a>) * Num)) == NULL)
00048         <font class="keywordflow">return</font> <a class="code" href="glfont_8h.html#a1">FALSE</a>;
00049 
00050     <font class="comment">//Read glFont characters</font>
00051     fread(Font-&gt;<a class="code" href="structGLFONT.html#m5">Char</a>, <font class="keyword">sizeof</font>(<a class="code" href="structGLFONTCHAR.html">GLFONTCHAR</a>), Num, Input);
00052 
00053     <font class="comment">//Get texture size</font>
00054     Num = Font-&gt;<a class="code" href="structGLFONT.html#m1">TexWidth</a> * Font-&gt;<a class="code" href="structGLFONT.html#m2">TexHeight</a> * 2;
00055 
00056     <font class="comment">//Allocate memory for texture data</font>
00057     <font class="keywordflow">if</font> ((TexBytes = (<font class="keywordtype">char</font> *)malloc(Num)) == NULL)
00058         <font class="keywordflow">return</font> <a class="code" href="glfont_8h.html#a1">FALSE</a>;
00059 
00060     <font class="comment">//Read texture data</font>
00061     fread(TexBytes, <font class="keyword">sizeof</font>(<font class="keywordtype">char</font>), Num, Input);
00062 
00063     <font class="comment">//Set texture attributes</font>
00064     glBindTexture(GL_TEXTURE_2D, Font-&gt;<a class="code" href="structGLFONT.html#m0">Tex</a>);
00065     glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
00066         GL_CLAMP);
00067     glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
00068         GL_CLAMP);
00069     glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
00070         GL_LINEAR);
00071     glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
00072         GL_LINEAR);
00073     glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,
00074         GL_MODULATE);
00075 
00076     <font class="comment">//Create texture</font>
00077     glTexImage2D(GL_TEXTURE_2D, 0, 2, Font-&gt;<a class="code" href="structGLFONT.html#m1">TexWidth</a>,
00078         Font-&gt;<a class="code" href="structGLFONT.html#m2">TexHeight</a>, 0, GL_LUMINANCE_ALPHA,
00079         GL_UNSIGNED_BYTE, (<font class="keywordtype">void</font> *)TexBytes);
00080 
00081     <font class="comment">//Clean up</font>
00082     free(TexBytes);
00083     fclose(Input);
00084 
00085     <font class="comment">//Return pointer to new font</font>
00086     <font class="keywordflow">return</font> <a class="code" href="glfont_8h.html#a0">TRUE</a>;
00087 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="glFont.cpp::glFontDestroy"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void glFontDestroy </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structGLFONT.html">GLFONT</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>Font</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00089">89</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.
<p>
References <a class="el" href="glfont_8h-source.html#l00034">GLFONT::Char</a>.
<p>
<div class="fragment"><pre>00090 {
00091     <font class="comment">//Free character memory</font>
00092     free(Font-&gt;<a class="code" href="structGLFONT.html#m5">Char</a>);
00093 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="glFont.cpp::glFontEnd"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void glFontEnd </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00107">107</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.
<p>
<div class="fragment"><pre>00108 {
00109     <font class="comment">//Font no longer current</font>
00110     <a class="code" href="glFont_8cpp.html#a0">glFont</a> = NULL;
00111 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="glFont.cpp::glFontTextOut"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void glFontTextOut </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>String</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>y</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>z</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00113">113</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.
<p>
References <a class="el" href="glfont_8h-source.html#l00034">GLFONT::Char</a>, <a class="el" href="glfont_8h-source.html#l00023">GLFONTCHAR::dx</a>, <a class="el" href="glfont_8h-source.html#l00023">GLFONTCHAR::dy</a>, <a class="el" href="glfont_8h-source.html#l00033">GLFONT::IntStart</a>, <a class="el" href="glfont_8h-source.html#l00024">GLFONTCHAR::tx1</a>, <a class="el" href="glfont_8h-source.html#l00025">GLFONTCHAR::tx2</a>, <a class="el" href="glfont_8h-source.html#l00024">GLFONTCHAR::ty1</a>, and <a class="el" href="glfont_8h-source.html#l00025">GLFONTCHAR::ty2</a>.
<p>
<div class="fragment"><pre>00115 {
00116     <font class="keywordtype">int</font> Length, i;
00117     <a class="code" href="structGLFONTCHAR.html">GLFONTCHAR</a> *Char;
00118 
00119     <font class="comment">//Return if we don't have a valid glFont</font>
00120     <font class="keywordflow">if</font> (<a class="code" href="glFont_8cpp.html#a0">glFont</a> == NULL)
00121         <font class="keywordflow">return</font>;
00122 
00123     <font class="comment">//Get length of string</font>
00124     Length = strlen(String);
00125 
00126     <font class="comment">//Begin rendering quads</font>
00127     glBegin(GL_QUADS);
00128 
00129     <font class="comment">//Loop through characters</font>
00130     <font class="keywordflow">for</font> (i = 0; i &lt; Length; i++)
00131     {
00132         <font class="comment">//Get pointer to glFont character</font>
00133         Char = &amp;<a class="code" href="glFont_8cpp.html#a0">glFont</a>-&gt;<a class="code" href="structGLFONT.html#m5">Char</a>[(int)String[i] -
00134             <a class="code" href="glFont_8cpp.html#a0">glFont</a>-&gt;<a class="code" href="structGLFONT.html#m3">IntStart</a>];
00135 
00136         <font class="comment">//Specify vertices and texture coordinates</font>
00137         glTexCoord2f(Char-&gt;<a class="code" href="structGLFONTCHAR.html#m2">tx1</a>, Char-&gt;<a class="code" href="structGLFONTCHAR.html#m3">ty1</a>);
00138         glVertex3f(x, y, z);
00139         glTexCoord2f(Char-&gt;<a class="code" href="structGLFONTCHAR.html#m2">tx1</a>, Char-&gt;<a class="code" href="structGLFONTCHAR.html#m5">ty2</a>);
00140         glVertex3f(x, y - Char-&gt;<a class="code" href="structGLFONTCHAR.html#m1">dy</a>, z);
00141         glTexCoord2f(Char-&gt;<a class="code" href="structGLFONTCHAR.html#m4">tx2</a>, Char-&gt;<a class="code" href="structGLFONTCHAR.html#m5">ty2</a>);
00142         glVertex3f(x + Char-&gt;<a class="code" href="structGLFONTCHAR.html#m0">dx</a>, y - Char-&gt;<a class="code" href="structGLFONTCHAR.html#m1">dy</a>, z);
00143         glTexCoord2f(Char-&gt;<a class="code" href="structGLFONTCHAR.html#m4">tx2</a>, Char-&gt;<a class="code" href="structGLFONTCHAR.html#m3">ty1</a>);
00144         glVertex3f(x + Char-&gt;<a class="code" href="structGLFONTCHAR.html#m0">dx</a>, y, z);
00145 
00146         <font class="comment">//Move to next character</font>
00147         x += Char-&gt;<a class="code" href="structGLFONTCHAR.html#m0">dx</a>;
00148     }
00149 
00150     <font class="comment">//Stop rendering quads</font>
00151     glEnd();
00152 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a name="a0" doxytag="glFont.cpp::glFont"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structGLFONT.html">GLFONT</a>* glFont
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="glFont_8cpp-source.html#l00021">21</a> of file <a class="el" href="glFont_8cpp-source.html">glFont.cpp</a>.    </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Fri Dec 23 05:19:35 2005 for OpenGL MDI 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
