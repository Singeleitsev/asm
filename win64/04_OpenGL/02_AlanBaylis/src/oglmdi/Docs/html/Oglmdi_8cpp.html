<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Oglmdi.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Oglmdi.cpp File Reference</h1><code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;gl\gl.h&gt;</code><br>
<code>#include &lt;gl\glu.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include "resource.rh"</code><br>

<p>
<a href="Oglmdi_8cpp-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Compounds</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structCHILD.html">CHILD</a></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a0">ID_MDI_CLIENT</a>&nbsp;&nbsp;&nbsp;4999</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a1">ID_MDI_FIRSTCHILD</a>&nbsp;&nbsp;&nbsp;50000</td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef CHILD&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a15">CHILD</a></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a19">InitGL</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a20">SetProjection</a> (int iWidth, int iHeight)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a21">DrawGLScene</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>LRESULT CALLBACK&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a22">WndProc</a> (HWND hWnd, UINT uMessage, WPARAM wParam, LPARAM lParam)</td></tr>
<tr><td nowrap align=right valign=top>LRESULT CALLBACK&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a23">MDIChildWndProc</a> (HWND hWnd, UINT uMessage, WPARAM wParam, LPARAM lParam)</td></tr>
<tr><td nowrap align=right valign=top>int WINAPI&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a24">WinMain</a> (HINSTANCE hInstance, HINSTANCE, LPSTR, int nCmdShow)</td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td nowrap align=right valign=top>char&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a2">g_szMainClassName</a> [] = "MainWindow"</td></tr>
<tr><td nowrap align=right valign=top>char&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a3">g_szChildClassName</a> [] = "OpenGL"</td></tr>
<tr><td nowrap align=right valign=top>HINSTANCE&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a4">g_hInst</a></td></tr>
<tr><td nowrap align=right valign=top>HWND&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a></td></tr>
<tr><td nowrap align=right valign=top>HWND&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a></td></tr>
<tr><td nowrap align=right valign=top>RECT&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a7">g_rectChild</a></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a8">g_fCubeRotationX</a></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a9">g_fCubeRotationY</a></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a10">g_bMouseDrag</a> = 0</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a11">g_iMouseLastX</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a12">g_iMouseLastY</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a13">g_iMouseDeltaX</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a14">g_iMouseDeltaY</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a16">g_iMaxChild</a> = 50</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> = 0</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structCHILD.html">CHILD</a> *&nbsp;</td><td valign=bottom><a class="el" href="Oglmdi_8cpp.html#a18">g_child</a> = new <a class="el" href="structCHILD.html">CHILD</a>[<a class="el" href="Oglmdi_8cpp.html#a16">g_iMaxChild</a>]</td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="Oglmdi.cpp::ID_MDI_CLIENT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_MDI_CLIENT&nbsp;&nbsp;&nbsp;4999
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00022">22</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a1" doxytag="Oglmdi.cpp::ID_MDI_FIRSTCHILD"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_MDI_FIRSTCHILD&nbsp;&nbsp;&nbsp;50000
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00023">23</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a name="a15" doxytag="Oglmdi.cpp::CHILD"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct CHILD  CHILD
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a21" doxytag="Oglmdi.cpp::DrawGLScene"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DrawGLScene </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00097">97</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
References <a class="el" href="Oglmdi_8cpp-source.html#l00032">g_fCubeRotationX</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00032">g_fCubeRotationY</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00037">g_iMouseDeltaX</a>, and <a class="el" href="Oglmdi_8cpp-source.html#l00038">g_iMouseDeltaY</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().
<p>
<div class="fragment"><pre>00098 {
00099     glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
00100     glMatrixMode(GL_MODELVIEW);
00101     glLoadIdentity();
00102 
00103     <font class="keywordflow">if</font>(g_bMouseDrag)        <font class="comment">// If left mouse button is down</font>
00104     {
00105         <a class="code" href="Oglmdi_8cpp.html#a8">g_fCubeRotationX</a> += (float)<a class="code" href="Oglmdi_8cpp.html#a14">g_iMouseDeltaY</a> * 0.5;   <font class="comment">// Apply mouse deltas to cube rotation values</font>
00106         <a class="code" href="Oglmdi_8cpp.html#a9">g_fCubeRotationY</a> += (float)<a class="code" href="Oglmdi_8cpp.html#a13">g_iMouseDeltaX</a> * 0.5;
00107     }
00108 
00109     glDisable(GL_TEXTURE_2D);
00110     glDisable(GL_LIGHTING);
00111     glPushMatrix();
00112     glTranslatef(0.0,0.0,-5.0);
00113     glRotatef(<a class="code" href="Oglmdi_8cpp.html#a8">g_fCubeRotationX</a>,1.0,0.0,0.0);
00114     glRotatef(<a class="code" href="Oglmdi_8cpp.html#a9">g_fCubeRotationY</a>,0.0,1.0,0.0);
00115     glBegin(GL_QUADS);
00116         <font class="comment">// Front Face</font>
00117         glColor3f(1.0,0.0,0.0);
00118         glVertex3f(-1.0, -1.0,  1.0);    <font class="comment">// Bottom Left</font>
00119         glColor3f(0.0,1.0,0.0);
00120         glVertex3f( 1.0, -1.0,  1.0);    <font class="comment">// Bottom Right</font>
00121         glColor3f(0.0,0.0,1.0);
00122         glVertex3f( 1.0,  1.0,  1.0);    <font class="comment">// Top Right</font>
00123         glColor3f(1.0,1.0,0.0);
00124         glVertex3f(-1.0,  1.0,  1.0);    <font class="comment">// Top Left</font>
00125         <font class="comment">// Back Face</font>
00126         glColor3f(0.0,0.0,1.0);
00127         glVertex3f(-1.0, -1.0, -1.0);    <font class="comment">// Bottom Right</font>
00128         glColor3f(0.0,1.0,0.0);
00129         glVertex3f(-1.0,  1.0, -1.0);    <font class="comment">// Top Right</font>
00130         glColor3f(1.0,0.0,0.0);
00131         glVertex3f( 1.0,  1.0, -1.0);    <font class="comment">// Top Left</font>
00132         glColor3f(1.0,1.0,0.0);
00133         glVertex3f( 1.0, -1.0, -1.0);    <font class="comment">// Bottom Left</font>
00134         <font class="comment">// Top Face</font>
00135         glColor3f(0.0,1.0,0.0);
00136         glVertex3f(-1.0,  1.0, -1.0);    <font class="comment">// Top Left</font>
00137         glColor3f(1.0,1.0,0.0);
00138         glVertex3f(-1.0,  1.0,  1.0);    <font class="comment">// Bottom Left</font>
00139         glColor3f(0.0,0.0,1.0);
00140         glVertex3f( 1.0,  1.0,  1.0);    <font class="comment">// Bottom Right</font>
00141         glColor3f(1.0,0.0,0.0);
00142         glVertex3f( 1.0,  1.0, -1.0);    <font class="comment">// Top Right</font>
00143         <font class="comment">// Bottom Face</font>
00144         glColor3f(0.0,0.0,1.0);
00145         glVertex3f(-1.0, -1.0, -1.0);    <font class="comment">// Top Right</font>
00146         glColor3f(1.0,1.0,0.0);
00147         glVertex3f( 1.0, -1.0, -1.0);    <font class="comment">// Top Left</font>
00148         glColor3f(0.0,1.0,0.0);
00149         glVertex3f( 1.0, -1.0,  1.0);    <font class="comment">// Bottom Left</font>
00150         glColor3f(1.0,0.0,0.0);
00151         glVertex3f(-1.0, -1.0,  1.0);    <font class="comment">// Bottom Right</font>
00152         <font class="comment">// Right face</font>
00153         glColor3f(1.0,1.0,0.0);
00154         glVertex3f( 1.0, -1.0, -1.0);    <font class="comment">// Bottom Right</font>
00155         glColor3f(1.0,0.0,0.0);
00156         glVertex3f( 1.0,  1.0, -1.0);    <font class="comment">// Top Right</font>
00157         glColor3f(0.0,0.0,1.0);
00158         glVertex3f( 1.0,  1.0,  1.0);    <font class="comment">// Top Left</font>
00159         glColor3f(0.0,1.0,0.0);
00160         glVertex3f( 1.0, -1.0,  1.0);    <font class="comment">// Bottom Left</font>
00161         <font class="comment">// Left Face</font>
00162         glColor3f(0.0,0.0,1.0);
00163         glVertex3f(-1.0, -1.0, -1.0);    <font class="comment">// Bottom Left</font>
00164         glColor3f(1.0,0.0,0.0);
00165         glVertex3f(-1.0, -1.0,  1.0);    <font class="comment">// Bottom Right</font>
00166         glColor3f(1.0,1.0,0.0);
00167         glVertex3f(-1.0,  1.0,  1.0);    <font class="comment">// Top Right</font>
00168         glColor3f(0.0,1.0,0.0);
00169         glVertex3f(-1.0,  1.0, -1.0);    <font class="comment">// Top Left</font>
00170     glEnd();
00171     glPopMatrix();
00172     glEnable(GL_LIGHTING);
00173     glEnable(GL_TEXTURE_2D);
00174 }
</pre></div>    </td>
  </tr>
</table>
<a name="a19" doxytag="Oglmdi.cpp::InitGL"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void InitGL </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00052">52</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().
<p>
<div class="fragment"><pre>00053 {
00054     glCullFace(GL_BACK);
00055     glClearColor(0.0, 0.0, 0.0, 0.0);
00056     glClearDepth(1.0);
00057     glDepthFunc(GL_LESS);
00058     glEnable(GL_DEPTH_TEST);
00059     glShadeModel(GL_SMOOTH);
00060     glEnable(GL_NORMALIZE);
00061 
00062     <font class="keywordtype">float</font> MatAmbient[] = {0.8, 0.8, 0.8, 1.0};
00063     <font class="keywordtype">float</font> MatDiffuse[] = {0.8, 0.8, 0.8, 1.0};
00064     <font class="keywordtype">float</font> MatSpecular[] = {0.9, 0.9, 0.9, 1.0};
00065     <font class="keywordtype">float</font> MatEmmision[] = {0.0, 0.0, 0.0, 1.0};
00066     <font class="keywordtype">float</font> MatShininess[] = {100.0};
00067 
00068     glMaterialfv(GL_FRONT, GL_AMBIENT, MatAmbient);
00069     glMaterialfv(GL_FRONT, GL_DIFFUSE, MatDiffuse);
00070     glMaterialfv(GL_FRONT, GL_SPECULAR, MatSpecular);
00071     glMaterialfv(GL_FRONT, GL_EMISSION, MatEmmision);
00072     glMaterialfv(GL_FRONT, GL_SHININESS, MatShininess);
00073 
00074     <font class="keywordtype">float</font> LightAmbient[] = {0.2, 0.2, 0.2, 1.0};
00075     glLightfv(GL_LIGHT0, GL_AMBIENT, LightAmbient);
00076     <font class="keywordtype">float</font> LightPosition[] = {-3.0, 2.0, 1.0, 1.0};
00077     glLightfv(GL_LIGHT0, GL_POSITION, LightPosition);
00078 
00079     glEnable(GL_LIGHTING);
00080     glEnable(GL_LIGHT0);
00081     glEnable(GL_CULL_FACE);
00082 }
</pre></div>    </td>
  </tr>
</table>
<a name="a23" doxytag="Oglmdi.cpp::MDIChildWndProc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT CALLBACK MDIChildWndProc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>uMessage</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wParam</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00343">343</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
References <a class="el" href="Oglmdi_8cpp-source.html#l00034">g_bMouseDrag</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00029">g_hMainWindow</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00037">g_iMouseDeltaX</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00038">g_iMouseDeltaY</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00035">g_iMouseLastX</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00036">g_iMouseLastY</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00048">g_iNumChild</a>, and <a class="el" href="Oglmdi_8cpp-source.html#l00023">ID_MDI_FIRSTCHILD</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().
<p>
<div class="fragment"><pre>00344 {
00345     <font class="keywordflow">switch</font>(uMessage)
00346     {
00347         <font class="keywordflow">case</font> WM_LBUTTONDOWN:
00348             <a class="code" href="Oglmdi_8cpp.html#a10">g_bMouseDrag</a> = 1;                <font class="comment">// Set mouse flag</font>
00349             <a class="code" href="Oglmdi_8cpp.html#a11">g_iMouseLastX</a> = LOWORD(lParam);  <font class="comment">// Get mouse position</font>
00350             <a class="code" href="Oglmdi_8cpp.html#a12">g_iMouseLastY</a> = HIWORD(lParam);
00351             SetCapture(hWnd);             <font class="comment">// Capture the mouse</font>
00352         <font class="keywordflow">break</font>;
00353 
00354         <font class="keywordflow">case</font> WM_MOUSEMOVE:
00355             <font class="keywordflow">if</font>(g_bMouseDrag)                  <font class="comment">// If mouse flag set</font>
00356             {
00357                 <a class="code" href="Oglmdi_8cpp.html#a13">g_iMouseDeltaX</a> = LOWORD(lParam) - <a class="code" href="Oglmdi_8cpp.html#a11">g_iMouseLastX</a>;   <font class="comment">// Get mouse deltas</font>
00358                 <a class="code" href="Oglmdi_8cpp.html#a14">g_iMouseDeltaY</a> = HIWORD(lParam) - <a class="code" href="Oglmdi_8cpp.html#a12">g_iMouseLastY</a>;
00359                 <a class="code" href="Oglmdi_8cpp.html#a11">g_iMouseLastX</a> = LOWORD(lParam);                 <font class="comment">// Get new mouse position</font>
00360                 <a class="code" href="Oglmdi_8cpp.html#a12">g_iMouseLastY</a> = HIWORD(lParam);
00361             }
00362         <font class="keywordflow">break</font>;
00363 
00364         <font class="keywordflow">case</font> WM_LBUTTONUP:         <font class="comment">// If left button is released</font>
00365             <a class="code" href="Oglmdi_8cpp.html#a10">g_bMouseDrag</a> = 0;         <font class="comment">// Clear mouse flag</font>
00366             ReleaseCapture();      <font class="comment">// Release the mouse capture</font>
00367         <font class="keywordflow">break</font>;
00368 
00369 <font class="comment">/*</font>
00370 <font class="comment">        //This msg isn't posted if the mouse is captured</font>
00371 <font class="comment">        case WM_NCMOUSEMOVE:</font>
00372 <font class="comment">        {</font>
00373 <font class="comment">            POINTS pts;</font>
00374 <font class="comment">            if(g_bMouseDrag)</font>
00375 <font class="comment">            {</font>
00376 <font class="comment">                pts = MAKEPOINTS(lParam);</font>
00377 <font class="comment">                g_iMouseDeltaX = pts.x - g_iMouseLastX;</font>
00378 <font class="comment">                g_iMouseDeltaY = pts.y - g_iMouseLastY;</font>
00379 <font class="comment">                g_iMouseLastX = pts.x;</font>
00380 <font class="comment">                g_iMouseLastY = pts.y;</font>
00381 <font class="comment">            }</font>
00382 <font class="comment">        }</font>
00383 <font class="comment">        break;</font>
00384 <font class="comment">//*/</font>
00385 
00386 <font class="comment">/* The following code paints the child window when necessary but isn't needed as we</font>
00387 <font class="comment">repaint all of them each frame. */</font>
00388 
00389 <font class="comment">/*</font>
00390 <font class="comment">        case WM_PAINT:</font>
00391 <font class="comment">        {</font>
00392 <font class="comment">            int iThisChild;</font>
00393 <font class="comment">            PAINTSTRUCT ps;</font>
00394 <font class="comment">            BeginPaint(hWnd, &amp;ps);</font>
00395 <font class="comment">            iThisChild = GetDlgCtrlID(hWnd) - ID_MDI_FIRSTCHILD;</font>
00396 <font class="comment">            wglMakeCurrent(g_child[iThisChild].hDC, g_child[iThisChild].hRC);</font>
00397 <font class="comment">            GetClientRect(hWnd, &amp;g_rectChild);</font>
00398 <font class="comment">            if(g_rectChild.right &gt; 0 &amp;&amp; g_rectChild.bottom &gt; 0)</font>
00399 <font class="comment">                SetProjection(g_rectChild.right, g_rectChild.bottom);</font>
00400 <font class="comment">            DrawGLScene();</font>
00401 <font class="comment">            glFlush();</font>
00402 <font class="comment">            SwapBuffers(hDC);</font>
00403 <font class="comment">            EndPaint(hWnd, &amp;ps);</font>
00404 <font class="comment">        }</font>
00405 <font class="comment">        break;</font>
00406 <font class="comment">//*/</font>
00407         <font class="keywordflow">case</font> WM_CLOSE:
00408             <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a>--;                       <font class="comment">// Decrement the number of child windows</font>
00409             <font class="keywordflow">if</font>(<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> == 0)                 <font class="comment">// If this is the last child window then just free the DC and RC</font>
00410             {
00411                 wglMakeCurrent( NULL, NULL );
00412                 ReleaseDC(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[0].hWnd, <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[0].hDC);
00413                 wglDeleteContext(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[0].hRC);
00414             }
00415             <font class="keywordflow">else</font>
00416             {
00417                 <font class="keywordtype">int</font> iLoop;
00418                 <font class="keywordtype">int</font> iThisChild;
00419                 <font class="keywordtype">char</font> szWindowTitle[20];
00420                 iThisChild = GetDlgCtrlID(hWnd) - <a class="code" href="Oglmdi_8cpp.html#a1">ID_MDI_FIRSTCHILD</a>;
00421                 ReleaseDC(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iThisChild].hWnd, <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iThisChild].hDC);    <font class="comment">// Free this childs DC and RC</font>
00422                 wglDeleteContext(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iThisChild].hRC);
00423                 <font class="keywordflow">if</font>(iThisChild != <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a>)                  <font class="comment">// If this child isn't the last in the array of children</font>
00424                 {
00425                     <font class="keywordflow">for</font> (iLoop = iThisChild; iLoop &lt; (g_iNumChild); iLoop++)   <font class="comment">// Loop from this child to the end of the array</font>
00426                     {
00427                         <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop] = <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop + 1];       <font class="comment">// Shift the children forward in the array</font>
00428                         sprintf(szWindowTitle, <font class="stringliteral">"%d"</font>, iLoop);
00429                         SetWindowText(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hWnd, szWindowTitle);  <font class="comment">// Renumber the children</font>
00430                     }
00431                 }
00432             }
00433         <font class="keywordflow">break</font>;
00434 
00435         <font class="keywordflow">case</font> WM_MDIACTIVATE:
00436         {
00437             HMENU hMenu, hFileMenu;
00438             UINT uEnableFlag;
00439 
00440             hMenu = GetMenu(<a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a>);
00441             <font class="keywordflow">if</font>(hWnd == (HWND)lParam)       <font class="comment">//being activated</font>
00442             {
00443                 uEnableFlag = MF_ENABLED;
00444             }
00445             <font class="keywordflow">else</font>
00446             {
00447                 uEnableFlag = MF_GRAYED;    <font class="comment">//being de-activated</font>
00448             }
00449             EnableMenuItem(hMenu, 1, MF_BYPOSITION | uEnableFlag);
00450             EnableMenuItem(hMenu, 2, MF_BYPOSITION | uEnableFlag);
00451 
00452             hFileMenu = GetSubMenu(hMenu, 0);
00453             EnableMenuItem(hFileMenu, CM_FILE_SAVE, MF_BYCOMMAND | uEnableFlag);
00454             EnableMenuItem(hFileMenu, CM_FILE_SAVEAS, MF_BYCOMMAND | uEnableFlag);
00455 
00456             DrawMenuBar(<a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a>);
00457         }
00458         <font class="keywordflow">break</font>;
00459 
00460         <font class="keywordflow">case</font> WM_COMMAND:
00461             <font class="keywordflow">switch</font>(LOWORD(wParam))
00462             {
00463 <font class="comment">//              case CM_FILE_SAVE: etc</font>
00464             }
00465         <font class="keywordflow">return</font> 0;
00466     }
00467     <font class="keywordflow">return</font> DefMDIChildProc(hWnd, uMessage, wParam, lParam);
00468 }
</pre></div>    </td>
  </tr>
</table>
<a name="a20" doxytag="Oglmdi.cpp::SetProjection"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetProjection </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>iWidth</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>iHeight</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00085">85</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().
<p>
<div class="fragment"><pre>00086 {
00087     <font class="keywordflow">if</font>(iHeight == 0)
00088     {
00089         iHeight = 1;
00090     }
00091     glViewport(0, 0, iWidth, iHeight);
00092     glMatrixMode(GL_PROJECTION);
00093     glLoadIdentity();
00094     gluPerspective(45.0,(<font class="keywordtype">float</font>)iWidth/(<font class="keywordtype">float</font>)iHeight,0.1,200.0);
00095 }
</pre></div>    </td>
  </tr>
</table>
<a name="a24" doxytag="Oglmdi.cpp::WinMain"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI WinMain </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nCmdShow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00470">470</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
References <a class="el" href="Oglmdi_8cpp-source.html#l00097">DrawGLScene</a>(), <a class="el" href="Oglmdi_8cpp-source.html#l00027">g_hInst</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00029">g_hMainWindow</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00028">g_hMDIClient</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00048">g_iNumChild</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00030">g_rectChild</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00026">g_szChildClassName</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00025">g_szMainClassName</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>(), <a class="el" href="Oglmdi_8cpp-source.html#l00085">SetProjection</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().
<p>
<div class="fragment"><pre>00471 {
00472     MSG Msg;
00473     WNDCLASSEX wc;
00474     <a class="code" href="Oglmdi_8cpp.html#a4">g_hInst</a> = hInstance;
00475 
00476     <font class="comment">// Create an OpenGL compatible window class</font>
00477     wc.cbSize = <font class="keyword">sizeof</font>(WNDCLASSEX);
00478     wc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC | CS_DBLCLKS;
00479     wc.lpfnWndProc = (WNDPROC)<a class="code" href="Oglmdi_8cpp.html#a23">MDIChildWndProc</a>;
00480     wc.cbClsExtra = 0;
00481     wc.cbWndExtra = 0;
00482     wc.hInstance = hInstance;
00483     wc.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_CHILDICON));
00484     wc.hCursor = LoadCursor(NULL, IDC_ARROW);
00485     wc.hbrBackground = (HBRUSH)(COLOR_3DSHADOW+1);    <font class="comment">// Background color (Only seen if OGL fails)</font>
00486     wc.lpszMenuName = NULL;
00487     wc.lpszClassName = <a class="code" href="Oglmdi_8cpp.html#a3">g_szChildClassName</a>;
00488     wc.hIconSm = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_CHILDICON));
00489 
00490     <font class="keywordflow">if</font>(!RegisterClassEx(&amp;wc))
00491     {
00492         MessageBox(NULL,<font class="stringliteral">"Failed to register the child window."</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONEXCLAMATION);
00493         <font class="keywordflow">return</font> FALSE;
00494     }
00495 
00496     <font class="comment">// Create the frame window</font>
00497     wc.cbSize = <font class="keyword">sizeof</font>(WNDCLASSEX);
00498     wc.style = CS_HREDRAW | CS_VREDRAW;
00499     wc.lpfnWndProc = (WNDPROC)<a class="code" href="Oglmdi_8cpp.html#a22">WndProc</a>;
00500     wc.cbClsExtra = 0;
00501     wc.cbWndExtra = 0;
00502     wc.hInstance = hInstance;
00503     wc.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_MYICON));
00504     wc.hCursor = LoadCursor(NULL, IDC_ARROW);
00505     wc.hbrBackground = (HBRUSH)(COLOR_3DSHADOW+1);
00506     wc.lpszMenuName = <font class="stringliteral">"MAIN"</font>;
00507     wc.lpszClassName = <a class="code" href="Oglmdi_8cpp.html#a2">g_szMainClassName</a>;
00508     wc.hIconSm = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_MYICON));
00509 
00510     <font class="keywordflow">if</font>(!RegisterClassEx(&amp;wc))
00511     {
00512         MessageBox(0, <font class="stringliteral">"Failed to register the main window."</font>, <font class="stringliteral">"Error"</font>,
00513         MB_ICONEXCLAMATION | MB_OK);
00514         <font class="keywordflow">return</font> -1;
00515     }
00516 
00517     <a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a> = CreateWindowEx(WS_EX_LEFT, <a class="code" href="Oglmdi_8cpp.html#a2">g_szMainClassName</a>, <font class="stringliteral">"Al's OpenGL MDI Example"</font>,
00518     WS_OVERLAPPEDWINDOW | WS_CLIPCHILDREN,
00519     CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
00520     NULL, NULL, hInstance, NULL);
00521 
00522     <font class="keywordflow">if</font>(<a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a> == NULL)
00523     {
00524         MessageBox(0, <font class="stringliteral">"Failed to create window."</font>, <font class="stringliteral">"ERROR"</font>, MB_ICONEXCLAMATION | MB_OK);
00525         <font class="keywordflow">return</font> -1;
00526     }
00527 
00528     ShowWindow(<a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a>, nCmdShow);
00529     UpdateWindow(<a class="code" href="Oglmdi_8cpp.html#a6">g_hMainWindow</a>);
00530 
00531     <font class="keywordtype">int</font> iLoop;
00532     <font class="keywordflow">while</font>(GetMessage(&amp;Msg, NULL, 0, 0))
00533     {
00534         <font class="keywordflow">if</font>(!TranslateMDISysAccel(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, &amp;Msg))
00535         {
00536             TranslateMessage(&amp;Msg);
00537             DispatchMessage(&amp;Msg);
00538         }
00539 
00540         <font class="keywordflow">if</font>(g_iNumChild)                             <font class="comment">// If we have some children</font>
00541         {
00542             <font class="keywordflow">for</font>(iLoop = 0; iLoop &lt; <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a>; iLoop++)   <font class="comment">// Loop through all children</font>
00543             {
00544                 <font class="keywordflow">if</font>(!IsIconic(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hWnd))   <font class="comment">// If child isn't iconic (minimized)</font>
00545                 {
00546                     wglMakeCurrent(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hDC, <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hRC);  <font class="comment">// Make them the current DC and RC</font>
00547                     GetClientRect(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hWnd, &amp;<a class="code" href="Oglmdi_8cpp.html#a7">g_rectChild</a>);
00548                     <font class="keywordflow">if</font>(<a class="code" href="Oglmdi_8cpp.html#a7">g_rectChild</a>.right &gt; 0 &amp;&amp; <a class="code" href="Oglmdi_8cpp.html#a7">g_rectChild</a>.bottom &gt; 0)
00549                         <a class="code" href="Oglmdi_8cpp.html#a20">SetProjection</a>(<a class="code" href="Oglmdi_8cpp.html#a7">g_rectChild</a>.right, <a class="code" href="Oglmdi_8cpp.html#a7">g_rectChild</a>.bottom);        <font class="comment">// Set the childs projection matrix</font>
00550                     <a class="code" href="Oglmdi_8cpp.html#a21">DrawGLScene</a>();
00551                     glFlush();
00552                     SwapBuffers(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hDC);
00553                 }
00554             }
00555         }
00556     }
00557     <font class="keywordflow">return</font> Msg.wParam;
00558 }
</pre></div>    </td>
  </tr>
</table>
<a name="a22" doxytag="Oglmdi.cpp::WndProc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT CALLBACK WndProc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>uMessage</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wParam</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00176">176</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
References <a class="el" href="Oglmdi_8cpp-source.html#l00027">g_hInst</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00028">g_hMDIClient</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00047">g_iMaxChild</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00048">g_iNumChild</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00026">g_szChildClassName</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00022">ID_MDI_CLIENT</a>, <a class="el" href="Oglmdi_8cpp-source.html#l00023">ID_MDI_FIRSTCHILD</a>, and <a class="el" href="Oglmdi_8cpp-source.html#l00052">InitGL</a>().
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().
<p>
<div class="fragment"><pre>00177 {
00178     <font class="keywordflow">switch</font>(uMessage)
00179     {
00180         <font class="keywordflow">case</font> WM_CREATE:
00181         {
00182             CLIENTCREATESTRUCT ccs;
00183             <font class="comment">// Find window menu where children will be listed</font>
00184             ccs.hWindowMenu = NULL;
00185 <font class="comment">// If the menus document list for more than 9 children didn't upset the child ID then I would use the line below</font>
00186             <font class="comment">//ccs.hWindowMenu = (HMENU)GetSubMenu(GetMenu(hWnd), 2); // if you use less than 10 windows then use this line</font>
00187             ccs.idFirstChild = <a class="code" href="Oglmdi_8cpp.html#a1">ID_MDI_FIRSTCHILD</a>;
00188 
00189             <a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a> = CreateWindowEx(WS_EX_CLIENTEDGE, <font class="stringliteral">"MDICLIENT"</font>, NULL,
00190             WS_CHILD | WS_CLIPCHILDREN | WS_CLIPSIBLINGS,                    <font class="comment">//WS_VSCROLL and WS_HSCROLL do not work properly yet</font>
00191             CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
00192             hWnd, (HMENU)<a class="code" href="Oglmdi_8cpp.html#a0">ID_MDI_CLIENT</a>, <a class="code" href="Oglmdi_8cpp.html#a4">g_hInst</a>, (LPVOID)&amp;ccs);
00193 
00194             ShowWindow(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, SW_SHOW);
00195             <font class="keywordflow">return</font> 0;
00196         }
00197         <font class="keywordflow">case</font> WM_COMMAND:
00198         {
00199             <font class="keywordflow">switch</font>(LOWORD(wParam))
00200             {
00201                 <font class="keywordflow">case</font> CM_FILE_EXIT:
00202                     PostMessage(hWnd, WM_CLOSE, 0, 0);
00203                 <font class="keywordflow">break</font>;
00204 
00205                 <font class="keywordflow">case</font> CM_FILE_NEW:
00206                 {
00207                     HWND hChild;
00208 
00209                     <font class="keywordflow">if</font>(<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> &lt; <a class="code" href="Oglmdi_8cpp.html#a16">g_iMaxChild</a>)      <font class="comment">// If the number of children hasn't reached the maximum</font>
00210                         <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a>++;              <font class="comment">// Increment the number of children</font>
00211                     <font class="keywordflow">else</font>
00212                         <font class="keywordflow">break</font>;                   <font class="comment">// Otherwise break out of the routine</font>
00213 
00214                     <font class="keywordtype">char</font> szWindowTitle[20];
00215                     sprintf(szWindowTitle, <font class="stringliteral">"%d"</font>, <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1);
00216 
00217 <font class="comment">/* One way to create a child window is to send a WM_MDICREATE message to the client</font>
00218 <font class="comment">window and pass it a pointer to a MDICREATESTRUCT. */</font>
00219 
00220 <font class="comment">/*</font>
00221 <font class="comment">                    MDICREATESTRUCT mcs;</font>
00222 <font class="comment">                    mcs.szTitle = szWindowTitle;</font>
00223 <font class="comment">                    mcs.szClass = g_szChildClassName;</font>
00224 <font class="comment">                    mcs.hOwner  = g_hInst;</font>
00225 <font class="comment">                    mcs.x = mcs.cx = CW_USEDEFAULT;</font>
00226 <font class="comment">                    mcs.y = mcs.cy = CW_USEDEFAULT;</font>
00227 <font class="comment">                    mcs.style = MDIS_ALLCHILDSTYLES;</font>
00228 <font class="comment"></font>
00229 <font class="comment">                    hChild = (HWND)SenduMessage(g_hMDIClient, WM_MDICREATE, 0, (LONG)&amp;mcs);</font>
00230 <font class="comment">//*/</font>
00231 
00232 <font class="comment">/* Another way to create a child window is to use CreateWindowEx and set the extended</font>
00233 <font class="comment">windows style  to WS_EX_MDICHILD. I prefer this method as it will allow each child to be created in</font>
00234 <font class="comment">seperate threads in the future. */</font>
00235 
00236 <font class="comment">//*</font>
00237                     CREATESTRUCT cs;
00238                     ZeroMemory(&amp;cs, <font class="keyword">sizeof</font>(CREATESTRUCT));
00239 
00240                     hChild = CreateWindowEx(
00241                     WS_EX_MDICHILD,
00242                     <a class="code" href="Oglmdi_8cpp.html#a3">g_szChildClassName</a>,
00243                     szWindowTitle,
00244                     WS_CHILD | WS_VISIBLE | WS_OVERLAPPEDWINDOW,
00245                     CW_USEDEFAULT,
00246                     CW_USEDEFAULT,
00247                     CW_USEDEFAULT,
00248                     CW_USEDEFAULT,
00249                     <a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>,
00250                     NULL,
00251                     <a class="code" href="Oglmdi_8cpp.html#a4">g_hInst</a>,
00252                     &amp;cs
00253                     );
00254 <font class="comment">//*/</font>
00255                     <font class="keywordflow">if</font>(!hChild)
00256                     {
00257                         MessageBox(NULL, <font class="stringliteral">"Child creation failed."</font>, <font class="stringliteral">"Error"</font>,
00258                         MB_ICONEXCLAMATION | MB_OK);
00259                     }
00260 
00261                     <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hWnd = hChild;         <font class="comment">// Set child windows handle</font>
00262                     <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hDC = GetDC(hChild);   <font class="comment">// Set child windows device context</font>
00263 
00264                     PIXELFORMATDESCRIPTOR pfd;
00265                     ZeroMemory(&amp;pfd, <font class="keyword">sizeof</font>(pfd));
00266                     pfd.nSize = <font class="keyword">sizeof</font>(pfd);
00267                     pfd.nVersion = 1;
00268                     pfd.dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
00269                     pfd.iPixelType = PFD_TYPE_RGBA;
00270                     pfd.cColorBits = 24;
00271                     pfd.cDepthBits = 16;
00272                     pfd.iLayerType = PFD_MAIN_PLANE;
00273                     <font class="keywordtype">int</font> iFormat = ChoosePixelFormat(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hDC, &amp;pfd);
00274                     SetPixelFormat(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hDC, iFormat, &amp;pfd);               <font class="comment">// Set pixel format for this child</font>
00275 
00276                     <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hRC = wglCreateContext(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hDC);  <font class="comment">// Set childs rendering context</font>
00277                     wglMakeCurrent(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hDC, <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[<a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a> - 1].hRC);     <font class="comment">// Make this child the current DC and RC</font>
00278                     <a class="code" href="Oglmdi_8cpp.html#a19">InitGL</a>();                                                             <font class="comment">// Initialize the rendering defaults for this child</font>
00279                 }
00280                 <font class="keywordflow">break</font>;
00281 
00282                 <font class="keywordflow">case</font> CM_WINDOW_TILEHORZ:
00283                     PostMessage(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, WM_MDITILE, MDITILE_HORIZONTAL, 0);
00284                 <font class="keywordflow">break</font>;
00285 
00286                 <font class="keywordflow">case</font> CM_WINDOW_TILEVERT:
00287                     PostMessage(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, WM_MDITILE, MDITILE_VERTICAL, 0);
00288                 <font class="keywordflow">break</font>;
00289 
00290                 <font class="keywordflow">case</font> CM_WINDOW_CASCADE:
00291                     PostMessage(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, WM_MDICASCADE, 0, 0);
00292                 <font class="keywordflow">break</font>;
00293 
00294                 <font class="keywordflow">case</font> CM_WINDOW_ARRANGE:
00295                     PostMessage(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, WM_MDIICONARRANGE, 0, 0);
00296                 <font class="keywordflow">break</font>;
00297 
00298                 <font class="keywordflow">default</font>:
00299                 {
00300                     <font class="keywordflow">if</font>(LOWORD(wParam) &gt;= <a class="code" href="Oglmdi_8cpp.html#a1">ID_MDI_FIRSTCHILD</a>)
00301                     {
00302                         DefFrameProc(hWnd, <a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, uMessage, wParam, lParam);
00303                     }
00304                     <font class="keywordflow">else</font>
00305                     {
00306                         HWND hChild;
00307                         hChild = (HWND)SendMessage(<a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, WM_MDIGETACTIVE, 0, 0);
00308                         <font class="keywordflow">if</font>(hChild)
00309                         {
00310                             SendMessage(hChild, WM_COMMAND, wParam, lParam);
00311                         }
00312                     }
00313                 }
00314             }
00315         }
00316         <font class="keywordflow">break</font>;
00317 
00318         <font class="keywordflow">case</font> WM_CLOSE:
00319         {
00320             <font class="keywordtype">int</font> iLoop;
00321             <font class="keywordflow">if</font>(g_iNumChild)             <font class="comment">// If there are any children</font>
00322             {
00323                 <font class="keywordflow">for</font>(iLoop = 0; iLoop &lt; <a class="code" href="Oglmdi_8cpp.html#a17">g_iNumChild</a>; iLoop++)     <font class="comment">// Send all children the WM_CLOSE to free up their DC and RC</font>
00324                 {
00325                     SendMessage(<a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>[iLoop].hWnd, WM_CLOSE, 0, 0);
00326                 }
00327             }
00328             <font class="keyword">delete</font>[] <a class="code" href="Oglmdi_8cpp.html#a18">g_child</a>;             <font class="comment">// Delete the array of children</font>
00329             DestroyWindow(hWnd);
00330         }
00331         <font class="keywordflow">break</font>;
00332 
00333         <font class="keywordflow">case</font> WM_DESTROY:
00334             PostQuitMessage(0);
00335         <font class="keywordflow">break</font>;
00336 
00337         <font class="keywordflow">default</font>:
00338             <font class="keywordflow">return</font> DefFrameProc(hWnd, <a class="code" href="Oglmdi_8cpp.html#a5">g_hMDIClient</a>, uMessage, wParam, lParam);
00339     }
00340     <font class="keywordflow">return</font> 0;
00341 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a name="a10" doxytag="Oglmdi.cpp::g_bMouseDrag"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool g_bMouseDrag = 0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00034">34</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>().    </td>
  </tr>
</table>
<a name="a18" doxytag="Oglmdi.cpp::g_child"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structCHILD.html">CHILD</a>* g_child = new <a class="el" href="structCHILD.html">CHILD</a>[<a class="el" href="Oglmdi_8cpp.html#a16">g_iMaxChild</a>]
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00049">49</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.    </td>
  </tr>
</table>
<a name="a8" doxytag="Oglmdi.cpp::g_fCubeRotationX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float g_fCubeRotationX
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00032">32</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00097">DrawGLScene</a>().    </td>
  </tr>
</table>
<a name="a9" doxytag="Oglmdi.cpp::g_fCubeRotationY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float g_fCubeRotationY
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00032">32</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00097">DrawGLScene</a>().    </td>
  </tr>
</table>
<a name="a4" doxytag="Oglmdi.cpp::g_hInst"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HINSTANCE g_hInst
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00027">27</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a6" doxytag="Oglmdi.cpp::g_hMainWindow"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND g_hMainWindow
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00029">29</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().    </td>
  </tr>
</table>
<a name="a5" doxytag="Oglmdi.cpp::g_hMDIClient"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND g_hMDIClient
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00028">28</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a16" doxytag="Oglmdi.cpp::g_iMaxChild"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iMaxChild = 50
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00047">47</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a13" doxytag="Oglmdi.cpp::g_iMouseDeltaX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iMouseDeltaX
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00037">37</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00097">DrawGLScene</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>().    </td>
  </tr>
</table>
<a name="a14" doxytag="Oglmdi.cpp::g_iMouseDeltaY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iMouseDeltaY
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00038">38</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00097">DrawGLScene</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>().    </td>
  </tr>
</table>
<a name="a11" doxytag="Oglmdi.cpp::g_iMouseLastX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iMouseLastX
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00035">35</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>().    </td>
  </tr>
</table>
<a name="a12" doxytag="Oglmdi.cpp::g_iMouseLastY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iMouseLastY
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00036">36</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>().    </td>
  </tr>
</table>
<a name="a17" doxytag="Oglmdi.cpp::g_iNumChild"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int g_iNumChild = 0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00048">48</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00343">MDIChildWndProc</a>(), <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a7" doxytag="Oglmdi.cpp::g_rectChild"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RECT g_rectChild
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00030">30</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().    </td>
  </tr>
</table>
<a name="a3" doxytag="Oglmdi.cpp::g_szChildClassName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char g_szChildClassName[] = "OpenGL"
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00026">26</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>(), and <a class="el" href="Oglmdi_8cpp-source.html#l00176">WndProc</a>().    </td>
  </tr>
</table>
<a name="a2" doxytag="Oglmdi.cpp::g_szMainClassName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char g_szMainClassName[] = "MainWindow"
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Oglmdi_8cpp-source.html#l00025">25</a> of file <a class="el" href="Oglmdi_8cpp-source.html">Oglmdi.cpp</a>.
<p>
Referenced by <a class="el" href="Oglmdi_8cpp-source.html#l00470">WinMain</a>().    </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Fri Dec 23 05:19:18 2005 for OpenGL MDI by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
