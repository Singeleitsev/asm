<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>matrix.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>matrix.cpp</h1><a href="matrix_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include &lt;windows.h&gt;</font>
00002 
00003 
00004 <font class="preprocessor">#include "<a class="code" href="matrix_8h.html">matrix.h</a>"</font>
00005 
<a name="l00006"></a><a class="code" href="classMATRIX.html#a0">00006</a> <a class="code" href="classMATRIX.html#a0">MATRIX::MATRIX</a>()
00007 {
00008     <a class="code" href="classMATRIX.html#a2">LoadIdentity</a>();
00009 }
00010 
<a name="l00011"></a><a class="code" href="classMATRIX.html#a1">00011</a> <a class="code" href="classMATRIX.html#a1">MATRIX::~MATRIX</a>()
00012 {
00013 }
00014 
<a name="l00015"></a><a class="code" href="classMATRIX.html#a2">00015</a> <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a2">MATRIX::LoadIdentity</a>()
00016 {
00017     <a class="code" href="classMATRIX.html#m0">Element</a>[0]=1.0f;
00018         <a class="code" href="classMATRIX.html#m0">Element</a>[1]=0.0f;
00019         <a class="code" href="classMATRIX.html#m0">Element</a>[2]=0.0f;
00020         <a class="code" href="classMATRIX.html#m0">Element</a>[3]=0.0f;
00021 
00022         <a class="code" href="classMATRIX.html#m0">Element</a>[4]=0.0f;
00023         <a class="code" href="classMATRIX.html#m0">Element</a>[5]=1.0f;
00024         <a class="code" href="classMATRIX.html#m0">Element</a>[6]=0.0f;
00025         <a class="code" href="classMATRIX.html#m0">Element</a>[7]=0.0f;
00026 
00027         <a class="code" href="classMATRIX.html#m0">Element</a>[8]=0.0f;
00028         <a class="code" href="classMATRIX.html#m0">Element</a>[9]=0.0f;
00029         <a class="code" href="classMATRIX.html#m0">Element</a>[10]=1.0f;
00030         <a class="code" href="classMATRIX.html#m0">Element</a>[11]=0.0f;
00031 
00032         <a class="code" href="classMATRIX.html#m0">Element</a>[12]=0.0f;
00033         <a class="code" href="classMATRIX.html#m0">Element</a>[13]=0.0f;
00034         <a class="code" href="classMATRIX.html#m0">Element</a>[14]=0.0f;
00035         <a class="code" href="classMATRIX.html#m0">Element</a>[15]=1.0f;
00036 }
00037 
<a name="l00038"></a><a class="code" href="classMATRIX.html#a3">00038</a> <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a3">MATRIX::CopyMatrix</a>(<font class="keywordtype">float</font> m[16])
00039 {
00040         <a class="code" href="classMATRIX.html#m0">Element</a>[0 ] = m[0 ];
00041         <a class="code" href="classMATRIX.html#m0">Element</a>[1 ] = m[1 ];
00042         <a class="code" href="classMATRIX.html#m0">Element</a>[2 ] = m[2 ];
00043         <a class="code" href="classMATRIX.html#m0">Element</a>[3 ] = m[3 ];
00044         <a class="code" href="classMATRIX.html#m0">Element</a>[4 ] = m[4 ];
00045         <a class="code" href="classMATRIX.html#m0">Element</a>[5 ] = m[5 ];
00046         <a class="code" href="classMATRIX.html#m0">Element</a>[6 ] = m[6 ];
00047         <a class="code" href="classMATRIX.html#m0">Element</a>[7 ] = m[7 ];
00048         <a class="code" href="classMATRIX.html#m0">Element</a>[8 ] = m[8 ];
00049         <a class="code" href="classMATRIX.html#m0">Element</a>[9 ] = m[9 ];
00050         <a class="code" href="classMATRIX.html#m0">Element</a>[10] = m[10];
00051         <a class="code" href="classMATRIX.html#m0">Element</a>[11] = m[11];
00052         <a class="code" href="classMATRIX.html#m0">Element</a>[12] = m[12];
00053         <a class="code" href="classMATRIX.html#m0">Element</a>[13] = m[13];
00054         <a class="code" href="classMATRIX.html#m0">Element</a>[14] = m[14];
00055         <a class="code" href="classMATRIX.html#m0">Element</a>[15] = m[15];
00056 }
00057 
00058 <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a4">MATRIX::MultMatrix</a>(<font class="keywordtype">float</font> m[])
00059 {
00060         <a class="code" href="classMATRIX.html">MATRIX</a> temp;
00061 
00062         temp.<a class="code" href="classMATRIX.html#a3">CopyMatrix</a>(this-&gt;Element);
00063 
00064       <a class="code" href="classMATRIX.html#m0">Element</a>[0] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[0 ]*m[0 ]
00065             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[4 ]*m[1 ]
00066             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[8 ]*m[2 ]
00067             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[12]*m[3 ];
00068 
00069       <a class="code" href="classMATRIX.html#m0">Element</a>[1] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[1 ]*m[0 ]
00070             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[5 ]*m[1 ]
00071             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[9 ]*m[2 ]
00072             + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[13]*m[3 ];
00073 
00074       <a class="code" href="classMATRIX.html#m0">Element</a>[2] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[2 ]*m[0 ]
00075                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[6 ]*m[1 ]
00076                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[10]*m[2 ]
00077                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[14]*m[3 ];
00078 
00079     <a class="code" href="classMATRIX.html#m0">Element</a>[3] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[3 ]*m[0 ]
00080                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[7 ]*m[1 ]
00081                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[11]*m[2 ]
00082                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[15]*m[3 ];
00083 
00084       <a class="code" href="classMATRIX.html#m0">Element</a>[4] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[0 ]*m[4 ]
00085                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[4 ]*m[5 ]
00086                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[8 ]*m[6 ]
00087                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[12]*m[7 ];
00088 
00089       <a class="code" href="classMATRIX.html#m0">Element</a>[5] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[1 ]*m[4 ]
00090                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[5 ]*m[5 ]
00091                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[9 ]*m[6 ]
00092                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[13]*m[7 ];
00093 
00094       <a class="code" href="classMATRIX.html#m0">Element</a>[6] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[2 ]*m[4 ]
00095                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[6 ]*m[5 ]
00096                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[10]*m[6 ]
00097                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[14]*m[7 ];
00098 
00099       <a class="code" href="classMATRIX.html#m0">Element</a>[7] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[3 ]*m[4 ]
00100                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[7 ]*m[5 ]
00101                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[11]*m[6 ]
00102                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[15]*m[7 ];
00103 
00104       <a class="code" href="classMATRIX.html#m0">Element</a>[8] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[0 ]*m[8 ]
00105                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[4 ]*m[9 ]
00106                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[8 ]*m[10]
00107                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[12]*m[11];
00108 
00109       <a class="code" href="classMATRIX.html#m0">Element</a>[9] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[1 ]*m[8 ]
00110                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[5 ]*m[9 ]
00111                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[9 ]*m[10]
00112                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[13]*m[11];
00113 
00114       <a class="code" href="classMATRIX.html#m0">Element</a>[10]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[2 ]*m[8 ]
00115                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[6 ]*m[9 ]
00116                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[10]*m[10]
00117                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[14]*m[11];
00118 
00119       <a class="code" href="classMATRIX.html#m0">Element</a>[11]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[3 ]*m[8 ]
00120                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[7 ]*m[9 ]
00121                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[11]*m[10]
00122                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[15]*m[11];
00123 
00124       <a class="code" href="classMATRIX.html#m0">Element</a>[12]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[0 ]*m[12]
00125                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[4 ]*m[13]
00126                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[8 ]*m[14]
00127                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[12]*m[15];
00128 
00129       <a class="code" href="classMATRIX.html#m0">Element</a>[13]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[1 ]*m[12]
00130                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[5 ]*m[13]
00131                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[9 ]*m[14]
00132                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[13]*m[15];
00133 
00134       <a class="code" href="classMATRIX.html#m0">Element</a>[14]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[2 ]*m[12]
00135                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[6 ]*m[13]
00136                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[10]*m[14]
00137                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[14]*m[15];
00138 
00139       <a class="code" href="classMATRIX.html#m0">Element</a>[15]= temp.<a class="code" href="classMATRIX.html#m0">Element</a>[3 ]*m[12]
00140                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[7 ]*m[13]
00141                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[11]*m[14]
00142                + temp.<a class="code" href="classMATRIX.html#m0">Element</a>[15]*m[15];
00143 }
00144 
<a name="l00145"></a><a class="code" href="classMATRIX.html#a5">00145</a> <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a5">MATRIX::MatrixInverse</a>()
00146  {
00147       <a class="code" href="classMATRIX.html">MATRIX</a> temp;
00148 
00149       temp.<a class="code" href="classMATRIX.html#a3">CopyMatrix</a>(this-&gt;Element);
00150 
00151       <a class="code" href="classMATRIX.html#m0">Element</a>[0 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[0 ];
00152       <a class="code" href="classMATRIX.html#m0">Element</a>[1 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[4 ];
00153       <a class="code" href="classMATRIX.html#m0">Element</a>[2 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[8 ];
00154 
00155       <a class="code" href="classMATRIX.html#m0">Element</a>[4 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[1 ];
00156       <a class="code" href="classMATRIX.html#m0">Element</a>[5 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[5 ];
00157       <a class="code" href="classMATRIX.html#m0">Element</a>[6 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[9 ];
00158 
00159       <a class="code" href="classMATRIX.html#m0">Element</a>[8 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[2 ];
00160       <a class="code" href="classMATRIX.html#m0">Element</a>[9 ] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[6 ];
00161       <a class="code" href="classMATRIX.html#m0">Element</a>[10] = temp.<a class="code" href="classMATRIX.html#m0">Element</a>[10];
00162 
00163       <a class="code" href="classMATRIX.html#m0">Element</a>[12] *= -1.0f;
00164       <a class="code" href="classMATRIX.html#m0">Element</a>[13] *= -1.0f;
00165       <a class="code" href="classMATRIX.html#m0">Element</a>[14] *= -1.0f;
00166 }
00167 
<a name="l00168"></a><a class="code" href="classMATRIX.html#a6">00168</a> <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a6">MATRIX::MatrixFromAxisAngle</a>(<a class="code" href="classVECTOR.html">VECTOR</a> axis, <font class="keywordtype">float</font> theta)
00169 {
00170         <a class="code" href="classQUAT.html">QUAT</a> q;
00171         <font class="keywordtype">float</font> halfTheta = theta * 0.5;
00172         <font class="keywordtype">float</font> cosHalfTheta = cos(halfTheta);
00173         <font class="keywordtype">float</font> sinHalfTheta = sin(halfTheta);
00174         <font class="keywordtype">float</font> xs, ys, zs, wx, wy, wz, xx, xy, xz, yy, yz, zz;
00175         q.<a class="code" href="classQUAT.html#m0">x</a> = axis.<a class="code" href="classVECTOR.html#m0">x</a> * sinHalfTheta;
00176         q.<a class="code" href="classQUAT.html#m1">y</a> = axis.<a class="code" href="classVECTOR.html#m1">y</a> * sinHalfTheta;
00177         q.<a class="code" href="classQUAT.html#m2">z</a> = axis.<a class="code" href="classVECTOR.html#m2">z</a> * sinHalfTheta;
00178         q.<a class="code" href="classQUAT.html#m3">w</a> = cosHalfTheta;
00179         xs = q.<a class="code" href="classQUAT.html#m0">x</a> * 2;  ys = q.<a class="code" href="classQUAT.html#m1">y</a> * 2;  zs = q.<a class="code" href="classQUAT.html#m2">z</a> * 2;
00180         wx = q.<a class="code" href="classQUAT.html#m3">w</a> * xs; wy = q.<a class="code" href="classQUAT.html#m3">w</a> * ys; wz = q.<a class="code" href="classQUAT.html#m3">w</a> * zs;
00181         xx = q.<a class="code" href="classQUAT.html#m0">x</a> * xs; xy = q.<a class="code" href="classQUAT.html#m0">x</a> * ys; xz = q.<a class="code" href="classQUAT.html#m0">x</a> * zs;
00182         yy = q.<a class="code" href="classQUAT.html#m1">y</a> * ys; yz = q.<a class="code" href="classQUAT.html#m1">y</a> * zs; zz = q.<a class="code" href="classQUAT.html#m2">z</a> * zs;
00183         <a class="code" href="classMATRIX.html#m0">Element</a>[0] = 1 - (yy + zz);
00184         <a class="code" href="classMATRIX.html#m0">Element</a>[1] = xy - wz;
00185         <a class="code" href="classMATRIX.html#m0">Element</a>[2] = xz + wy;
00186         <a class="code" href="classMATRIX.html#m0">Element</a>[4] = xy + wz;
00187         <a class="code" href="classMATRIX.html#m0">Element</a>[5] = 1 - (xx + zz);
00188         <a class="code" href="classMATRIX.html#m0">Element</a>[6] = yz - wx;
00189         <a class="code" href="classMATRIX.html#m0">Element</a>[8] = xz - wy;
00190         <a class="code" href="classMATRIX.html#m0">Element</a>[9] = yz + wx;
00191         <a class="code" href="classMATRIX.html#m0">Element</a>[10] = 1 - (xx + yy);
00192         <a class="code" href="classMATRIX.html#m0">Element</a>[12] = <a class="code" href="classMATRIX.html#m0">Element</a>[13] = <a class="code" href="classMATRIX.html#m0">Element</a>[14] = <a class="code" href="classMATRIX.html#m0">Element</a>[3] = <a class="code" href="classMATRIX.html#m0">Element</a>[7] = <a class="code" href="classMATRIX.html#m0">Element</a>[11] = 0;
00193         <a class="code" href="classMATRIX.html#m0">Element</a>[15] = 1;
00194 }
00195 
<a name="l00196"></a><a class="code" href="classMATRIX.html#a7">00196</a> <font class="keywordtype">void</font> <a class="code" href="classMATRIX.html#a7">MATRIX::QuatToMatrix</a>(<a class="code" href="classQUAT.html">QUAT</a> quat)
00197 {
00198       <font class="keywordtype">float</font> wx, wy, wz, xx, yy, yz, xy, xz, zz, x2, y2, z2;
00199       <font class="comment">// calculate coefficients</font>
00200       x2 = quat.<a class="code" href="classQUAT.html#m0">x</a> + quat.<a class="code" href="classQUAT.html#m0">x</a>;
00201       y2 = quat.<a class="code" href="classQUAT.html#m1">y</a> + quat.<a class="code" href="classQUAT.html#m1">y</a>;
00202       z2 = quat.<a class="code" href="classQUAT.html#m2">z</a> + quat.<a class="code" href="classQUAT.html#m2">z</a>;
00203       xx = quat.<a class="code" href="classQUAT.html#m0">x</a> * x2;
00204       xy = quat.<a class="code" href="classQUAT.html#m0">x</a> * y2;
00205       xz = quat.<a class="code" href="classQUAT.html#m0">x</a> * z2;
00206       yy = quat.<a class="code" href="classQUAT.html#m1">y</a> * y2;
00207       yz = quat.<a class="code" href="classQUAT.html#m1">y</a> * z2;
00208       zz = quat.<a class="code" href="classQUAT.html#m2">z</a> * z2;
00209       wx = quat.<a class="code" href="classQUAT.html#m3">w</a> * x2;
00210       wy = quat.<a class="code" href="classQUAT.html#m3">w</a> * y2;
00211       wz = quat.<a class="code" href="classQUAT.html#m3">w</a> * z2;
00212       <a class="code" href="classMATRIX.html#m0">Element</a>[0] = 1.0 - (yy + zz);
00213       <a class="code" href="classMATRIX.html#m0">Element</a>[1] = xy - wz;
00214       <a class="code" href="classMATRIX.html#m0">Element</a>[2] = xz + wy;
00215       <a class="code" href="classMATRIX.html#m0">Element</a>[3] = 0.0;
00216       <a class="code" href="classMATRIX.html#m0">Element</a>[4] = xy + wz;
00217       <a class="code" href="classMATRIX.html#m0">Element</a>[5] = 1.0 - (xx + zz);
00218       <a class="code" href="classMATRIX.html#m0">Element</a>[6] = yz - wx;
00219       <a class="code" href="classMATRIX.html#m0">Element</a>[7] = 0.0;
00220       <a class="code" href="classMATRIX.html#m0">Element</a>[8] = xz - wy;
00221       <a class="code" href="classMATRIX.html#m0">Element</a>[9] = yz + wx;
00222       <a class="code" href="classMATRIX.html#m0">Element</a>[10] = 1.0 - (xx + yy);
00223       <a class="code" href="classMATRIX.html#m0">Element</a>[11] = 0.0;
00224       <a class="code" href="classMATRIX.html#m0">Element</a>[12] = 0;
00225       <a class="code" href="classMATRIX.html#m0">Element</a>[13] = 0;
00226       <a class="code" href="classMATRIX.html#m0">Element</a>[14] = 0;
00227       <a class="code" href="classMATRIX.html#m0">Element</a>[15] = 1;
00228 }
</pre></div><hr><address align="right"><small>Generated on Fri Dec 23 05:19:34 2005 for OpenGL MDI 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
