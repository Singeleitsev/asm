<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>general.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>general.h File Reference</h1><code>#include "<a class="el" href="shared_8h-source.html">shared.h</a>"</code><br>
<code>#include "<a class="el" href="polygon_8h-source.html">polygon.h</a>"</code><br>
<code>#include "<a class="el" href="texture_8h-source.html">texture.h</a>"</code><br>
<code>#include "<a class="el" href="camera_8h-source.html">camera.h</a>"</code><br>
<code>#include "<a class="el" href="locmath_8h-source.html">locmath.h</a>"</code><br>

<p>
<a href="general_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="general_8h.html#a0">LoadTGA</a> (<a class="el" href="classTEXTURE.html">TEXTURE</a> *<a class="el" href="Oglmdi2_8cpp.html#a7">texture</a>, char *filename)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="general_8h.html#a1">SetGLProperties</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="general_8h.html#a2">SetGLView</a> (int Width, int Height)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="general_8h.html#a3">SetGLMaterial</a> ()</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a0" doxytag="general.h::LoadTGA"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool LoadTGA </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTEXTURE.html">TEXTURE</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>texture</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>filename</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="general_8cpp-source.html#l00003">3</a> of file <a class="el" href="general_8cpp-source.html">general.cpp</a>.
<p>
References <a class="el" href="texture_8h-source.html#l00018">TEXTURE::Bpp</a>, <a class="el" href="texture_8h-source.html#l00020">TEXTURE::Height</a>, <a class="el" href="texture_8h-source.html#l00017">TEXTURE::ImageData</a>, <a class="el" href="Oglmdi2_8cpp-source.html#l00036">texture</a>, and <a class="el" href="texture_8h-source.html#l00019">TEXTURE::Width</a>.
<p>
<div class="fragment"><pre>00004 {
00005     GLubyte TGAheader[12]={0,0,2,0,0,0,0,0,0,0,0,0};                        <font class="comment">// Uncompressed TGA Header</font>
00006     GLubyte TGAcompare[12];                                                 <font class="comment">// Used To Compare TGA Header</font>
00007     GLubyte header[6];                                                      <font class="comment">// First 6 Useful Bytes From The Header</font>
00008     GLuint  bytesPerPixel;                                                  <font class="comment">// Holds Number Of Bytes Per Pixel Used In The TGA File</font>
00009     GLuint  imageSize;                                                      <font class="comment">// Used To Store The Image Size When Setting Aside Ram</font>
00010     GLuint  temp;                                                           <font class="comment">// Temporary Variable</font>
00011     GLuint  type=GL_RGBA;                                                   <font class="comment">// Set The Default GL Mode To RBGA (32 BPP)</font>
00012     FILE *file = fopen(filename, <font class="stringliteral">"rb"</font>);                                     <font class="comment">// Open The TGA Fi</font>
00013     <font class="keywordflow">if</font>( file==NULL ||                                                       <font class="comment">// Does File Even Exist?</font>
00014     fread(TGAcompare,1,<font class="keyword">sizeof</font>(TGAcompare),file)!=<font class="keyword">sizeof</font>(TGAcompare) ||      <font class="comment">// Are There 12 Bytes To Read?</font>
00015     memcmp(TGAheader,TGAcompare,<font class="keyword">sizeof</font>(TGAheader))!=0               ||      <font class="comment">// Does The Header Match What We Want?</font>
00016     fread(header,1,<font class="keyword">sizeof</font>(header),file)!=<font class="keyword">sizeof</font>(header))                    <font class="comment">// If So Read Next 6 Header Bytes</font>
00017     {
00018         <font class="keywordflow">if</font> (file == NULL)                                                   <font class="comment">// Did The File Even Exist? *Added Jim Strong*</font>
00019         {
00020             MessageBox(NULL,<font class="stringliteral">"Image file was not found"</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00021             <font class="keywordflow">return</font> <font class="keyword">false</font>;                                                   <font class="comment">// Return False</font>
00022         }
00023             <font class="keywordflow">if</font>(TGAcompare[2] == 1)
00024                 MessageBox(NULL,<font class="stringliteral">"Image cannot be indexed color. \r\n Convert the image to RGB or RGBA."</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00025             <font class="keywordflow">if</font>(TGAcompare[2] == 3)
00026                 MessageBox(NULL,<font class="stringliteral">"Image cannot be greyscale color. \r\n Convert the image to RGB or RGBA."</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00027             <font class="keywordflow">if</font>(TGAcompare[2] == 9 || TGAcompare[2] == 10)
00028                 MessageBox(NULL,<font class="stringliteral">"Image cannot be compressed. \r\n Convert the image to an uncompressed format."</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00029             fclose(file);                                                   <font class="comment">// If Anything Failed, Close The File</font>
00030             <font class="keywordflow">return</font> <font class="keyword">false</font>;                                                   <font class="comment">// Return False</font>
00031         }
00032         texture-&gt;<a class="code" href="classTEXTURE.html#m3">Width</a>  = header[1] * 256 + header[0];                      <font class="comment">// Determine The TGA Width      (highbyte*256+lowbyte)</font>
00033         texture-&gt;<a class="code" href="classTEXTURE.html#m4">Height</a> = header[3] * 256 + header[2];                      <font class="comment">// Determine The TGA Height     (highbyte*256+lowbyte)</font>
00034         <font class="keywordflow">if</font>( texture-&gt;<a class="code" href="classTEXTURE.html#m3">Width</a>  &lt;=0     ||                                      <font class="comment">// Is The Width Less Than Or Equal To Zero</font>
00035         texture-&gt;<a class="code" href="classTEXTURE.html#m4">Height</a> &lt;=0     ||                                          <font class="comment">// Is The Height Less Than Or Equal To Zero</font>
00036         (header[4]!=24 &amp;&amp; header[4]!=32))                                   <font class="comment">// Is The TGA 24 or 32 Bit?</font>
00037         {
00038             fclose(file);                                                   <font class="comment">// If Anything Failed, Close The File</font>
00039             <font class="keywordflow">if</font>(texture-&gt;<a class="code" href="classTEXTURE.html#m3">Width</a>  &lt;=0 || texture-&gt;<a class="code" href="classTEXTURE.html#m4">Height</a>  &lt;=0)
00040                 MessageBox(NULL,<font class="stringliteral">"Image must have a width and height greater than 0"</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00041             <font class="keywordflow">if</font>(header[4]!=24 &amp;&amp; header[4]!=32)
00042                 MessageBox(NULL,<font class="stringliteral">"Image must be 24 or 32 bit"</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00043             <font class="keywordflow">return</font> <font class="keyword">false</font>;                                               <font class="comment">// Return False</font>
00044         }
00045         texture-&gt;<a class="code" href="classTEXTURE.html#m2">Bpp</a>    = header[4];                                        <font class="comment">// Grab The TGA's Bits Per Pixel (24 or 32)</font>
00046         bytesPerPixel   = texture-&gt;<a class="code" href="classTEXTURE.html#m2">Bpp</a>/8;                                   <font class="comment">// Divide By 8 To Get The Bytes Per Pixel</font>
00047         imageSize       = texture-&gt;<a class="code" href="classTEXTURE.html#m3">Width</a>*texture-&gt;<a class="code" href="classTEXTURE.html#m4">Height</a>*bytesPerPixel;     <font class="comment">// Calculate The Memory Required For The TGA Data</font>
00048         texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>=(GLubyte *)malloc(imageSize);                    <font class="comment">// Reserve Memory To Hold The TGA Data</font>
00049         <font class="keywordflow">if</font>( texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>==NULL ||                                     <font class="comment">// Does The Storage Memory Exist?</font>
00050         fread(texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>, 1, imageSize, file)!=imageSize)           <font class="comment">// Does The Image Size Match The Memory Reserved?</font>
00051         {
00052             <font class="keywordflow">if</font>(texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>!=NULL)                                    <font class="comment">// Was Image Data Loaded</font>
00053                 free(texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>);                                   <font class="comment">// If So, Release The Image Data</font>
00054             MessageBox(NULL,<font class="stringliteral">"Image load failed for unknown reason."</font>,<font class="stringliteral">"Error"</font>,MB_OK|MB_ICONERROR);
00055             fclose(file);                                                   <font class="comment">// Close The File</font>
00056             <font class="keywordflow">return</font> <font class="keyword">false</font>;                                                   <font class="comment">// Return False</font>
00057         }
00058         <font class="keywordflow">for</font>(GLuint i=0; i&lt;int(imageSize); i+=bytesPerPixel)                 <font class="comment">// Loop Through The Image Data</font>
00059         {                                                                   <font class="comment">// Swaps The 1st And 3rd Bytes ('R'ed and 'B'lue)</font>
00060             temp=texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>[i];                                     <font class="comment">// Temporarily Store The Value At Image Data 'i'</font>
00061             texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>[i] = texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>[i + 2];              <font class="comment">// Set The 1st Byte To The Value Of The 3rd Byte</font>
00062             texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>[i + 2] = temp;                               <font class="comment">// Set The 3rd Byte To The Value In 'temp' (1st Byte Value)</font>
00063         }
00064         fclose (file);                                                      <font class="comment">// Close The File</font>
00065 
00066         <font class="comment">// Build A Texture From The Data</font>
00067         glGenTextures(1, &amp;texture[0].TexID);                                <font class="comment">// Generate OpenGL texture IDs</font>
00068         glBindTexture(GL_TEXTURE_2D, texture[0].TexID);
00069         glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
00070         glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
00071         <font class="keywordflow">if</font> (texture[0].<a class="code" href="classTEXTURE.html#m2">Bpp</a>==24)                                             <font class="comment">// Was The TGA 24 Bits</font>
00072         {
00073             type=GL_RGB;                                                    <font class="comment">// If So Set The 'type' To GL_RGB</font>
00074         }
00075         glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
00076         glTexImage2D(GL_TEXTURE_2D, 0, type, texture[0].Width, texture[0].Height, 0, type, GL_UNSIGNED_BYTE, texture[0].ImageData);
00077         gluBuild2DMipmaps(GL_TEXTURE_2D, type, texture[0].Width, texture[0].Height, type, GL_UNSIGNED_BYTE, texture[0].ImageData);
00078         free(texture-&gt;<a class="code" href="classTEXTURE.html#m1">ImageData</a>);
00079         <font class="keywordflow">return</font> <font class="keyword">true</font>;                                                        <font class="comment">// Texture Building Went Ok, Return True</font>
00080 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="general.h::SetGLMaterial"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetGLMaterial </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="general_8cpp-source.html#l00108">108</a> of file <a class="el" href="general_8cpp-source.html">general.cpp</a>.
<p>
<div class="fragment"><pre>00109 {
00110     <font class="keywordtype">float</font> no_mat[] = { 0.0, 0.0, 0.0, 1.0 };
00111     <font class="keywordtype">float</font> mat_ambient[] = { 0.4, 0.4, 0.4, 1.0 };
00112     <font class="keywordtype">float</font> mat_diffuse[] = { 0.8, 0.8, 0.8, 1.0 };
00113     <font class="keywordtype">float</font> mat_specular[] = { 0.9, 0.9, 0.9, 1.0 };
00114     <font class="keywordtype">float</font> high_shininess[] = { 80.0 };
00115 
00116     glMaterialfv(GL_FRONT, GL_AMBIENT, mat_ambient);
00117     glMaterialfv(GL_FRONT, GL_SPECULAR, mat_specular);
00118     glMaterialfv(GL_FRONT, GL_DIFFUSE, mat_diffuse);
00119     glMaterialfv(GL_FRONT, GL_EMISSION, no_mat);
00120     glMaterialfv(GL_FRONT, GL_SHININESS, high_shininess);
00121 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="general.h::SetGLProperties"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetGLProperties </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="general_8cpp-source.html#l00083">83</a> of file <a class="el" href="general_8cpp-source.html">general.cpp</a>.
<p>
<div class="fragment"><pre>00084 {
00085     glCullFace(GL_BACK);
00086     glClearColor(0.0f, 0.0f, 0.0f, 0.0f);    <font class="comment">// This Will Clear The Background Color To Black</font>
00087     glClearDepth(1.0);            <font class="comment">// Enables Clearing Of The Depth Buffer</font>
00088      glDepthFunc(GL_LESS);            <font class="comment">// The Type Of Depth Test To Do</font>
00089     glEnable(GL_DEPTH_TEST);        <font class="comment">// Enables Depth Testing</font>
00090     glShadeModel(GL_SMOOTH);        <font class="comment">// Enables Smooth Color Shading</font>
00091     glEnable(GL_NORMALIZE);
00092     glEnable(GL_CULL_FACE);
00093 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="general.h::SetGLView"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetGLView </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>Width</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>Height</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="general_8cpp-source.html#l00095">95</a> of file <a class="el" href="general_8cpp-source.html">general.cpp</a>.
<p>
<div class="fragment"><pre>00096 {
00097     <font class="keywordflow">if</font> (Height==0)                <font class="comment">// Prevent A Divide By Zero If The Window Is Too Small</font>
00098         Height=1;
00099 
00100     glViewport(0, 0, Width, Height);    <font class="comment">// Reset The Current Viewport And Perspective Transformation</font>
00101     glMatrixMode(GL_PROJECTION);        <font class="comment">// Select The Projection Matrix</font>
00102     glLoadIdentity();            <font class="comment">// Reset The Projection Matrix</font>
00103       gluPerspective(45.0,(<font class="keywordtype">float</font>)Width/(<font class="keywordtype">float</font>)Height,0.1,200.0);    <font class="comment">// Calculate The Aspect Ratio Of The Window</font>
00104     glMatrixMode(GL_MODELVIEW);        <font class="comment">// Select The Modelview Matrix</font>
00105     glLoadIdentity();
00106 }
</pre></div>    </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Fri Dec 23 05:19:35 2005 for OpenGL MDI 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
